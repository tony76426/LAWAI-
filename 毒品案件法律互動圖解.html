<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>毒品案件法律自助分析工具</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background: #F2E8DF;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #4f6c7d;
            padding-bottom: 10px;
        }
        .step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-left: 4px solid #4f6c7d;
        }
        .step-icon {
            font-size: 24px;
            margin-right: 15px;
            color: #4f6c7d;
        }
        .btn {
            display: inline-block;
            background: #4f6c7d;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #c0392b;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #4f6c7d;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #F2E8DF;
        }
        #calculator {
            background: #f2f2f2;
            padding: 20px;
            border-radius: 10px;
        }
        input, select {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
        .result {
            font-weight: bold;
            color: #4f6c7d;
            font-size: 18px;
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            border-radius: 5px 5px 0 0;
        }
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }
        .tab button:hover {
            background-color: #ddd;
        }
        .tab button.active {
            background-color: #4f6c7d;
            color: white;
        }
        .tabcontent {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 5px 5px;
            animation: fadeEffect 1s;
        }
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .checklist-item {
            margin-bottom: 10px;
        }
        .checklist-item input {
            width: auto;
            margin-right: 10px;
        }
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #4f6c7d;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
        }
        .container {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
        }
        .container::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background-color: white;
            border: 4px solid #4f6c7d;
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        .left {
            left: 0;
        }
        .right {
            left: 50%;
        }
        .left::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            right: 30px;
            border: medium solid #F2E8DF;
            border-width: 10px 0 10px 10px;
            border-color: transparent transparent transparent #F2E8DF;
        }
        .right::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            left: 30px;
            border: medium solid #F2E8DF;
            border-width: 10px 10px 10px 0;
            border-color: transparent #F2E8DF transparent transparent;
        }
        .right::after {
            left: -16px;
        }
        .content {
            padding: 20px 30px;
            background-color: white;
            position: relative;
            border-radius: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .content h3 {
            color: #4f6c7d;
            margin-top: 0;
        }
        .risk-meter {
            height: 30px;
            background: linear-gradient(to right, #4CAF50, #FFC107, #F44336);
            border-radius: 15px;
            margin: 20px 0;
            position: relative;
        }
        .risk-pointer {
            position: absolute;
            width: 2px;
            height: 40px;
            background: black;
            top: -5px;
            transform: translateX(-50%);
        }
        .risk-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }
        .outcome-card {
            border-left: 5px solid;
            padding: 15px;
            margin: 10px 0;
            background: white;
        }
        .positive {
            border-left-color: #58A4B0;
        }
        .negative {
            border-left-color: #4f6c7d;
        }
        .neutral {
            border-left-color: #FFC107;
        }
        .evidence-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .evidence-icon {
            font-size: 20px;
            margin-right: 10px;
            color: #4f6c7d;
        }
        .evidence-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .evidence-desc {
            font-size: 14px;
            color: #666;
        }
        .protection-item {
            margin-bottom: 10px;
            padding: 10px;
            background: #F2E8DF;
            border-radius: 5px;
        }
        .protection-title {
            font-weight: bold;
            color: #4f6c7d;
        }
        /* 刑責計算器專用樣式 */
        .penalty-calculator {
            background: #F2E8DF;
            padding: 20px;
            border-radius: 10px;
        }
        .penalty-calculator h1, 
        .penalty-calculator h2, 
        .penalty-calculator h3 {
            color: #4f6c7d;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .penalty-calculator h1 {
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            border-bottom: 2px solid #4f6c7d;
            padding-bottom: 10px;
        }
        .penalty-calculator .btn {
            background: #4f6c7d;
        }
        .penalty-calculator .btn:hover {
            background: #58A4B0;
        }
        .penalty-calculator th {
            background-color: #4f6c7d;
        }
        .penalty-calculator .note {
            background: #f2f2f2;
            border-left: 4px solid #4f6c7d;
            padding: 10px;
            margin: 10px 0;
            color: #333;
        }
    
@media screen and (max-width: 768px) {
    body {
        padding: 10px;
    }
    .card, .step, .tabcontent, .timeline .content {
        padding: 10px;
        font-size: 14px;
    }
    .step-icon {
        font-size: 18px;
        margin-right: 10px;
    }
    .timeline {
        padding-left: 0;
        padding-right: 0;
    }
    svg#interactive-flowchart {
        width: 100%;
        height: auto;
    }
    .tab button {
        font-size: 12px;
        padding: 10px;
    }
    table, th, td {
        font-size: 12px;
        padding: 8px;
    }
    .risk-labels {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }
    /* 刑責計算器響應式 */
    .penalty-calculator h1 {
        font-size: 1.5em;
    }
    .penalty-calculator h2 {
        font-size: 1.2em;
    }
    .penalty-calculator table {
        display: block;
        width: 100%;
        overflow-x: auto;
    }
    .penalty-calculator th, 
    .penalty-calculator td {
        padding: 8px;
        font-size: 0.9em;
    }
    .penalty-calculator input, 
    .penalty-calculator select {
        padding: 8px;
        font-size: 1em;
    }
    .penalty-calculator .btn {
        width: 100%;
        padding: 12px 0;
        margin: 10px 0;
        font-size: 1em;
    }
    .penalty-calculator .note {
        font-size: 0.9em;
        padding: 8px;
    }
}
</style>
<style>
@media (min-width: 769px) {
  .back-home-container a {
    border: 1px solid #4f6c7d !important;
    border-radius: 4px !important;
    padding: 2px 6px !important;
    font-size: 14px !important;
    color: #4f6c7d !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 2px !important;
    text-decoration: none !important;
  }
  .back-home-container .material-icons {
    font-size: 18px !important;
    color: #4f6c7d !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  .back-home-container .desktop-only {
    margin-left: 2px !important;
    font-weight: 600 !important;
  }
}
@media (max-width: 768px) {
  .back-home-container a {
    border: none !important;
    padding: 0 !important;
  }
  .back-home-container .material-icons {
    font-size: 22px !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  .back-home-container .desktop-only {
    display: none !important;
  }
}
</style><style>
.back-home-container a {
  all: unset;
  display: inline-flex;
  align-items: center;
  color: #4f6c7d;
  text-decoration: none;
  font-weight: 600;
  font-size: 14px;
}
.back-home-container a:visited,
.back-home-container a:active,
.back-home-container a:hover {
  color: #4f6c7d;
  text-decoration: none;
}
.back-home-container .material-icons {
  font-size: 22px;
  color: #4f6c7d !important;
}
@media (max-width: 768px) {
  .back-home-container a {
    padding: 0 !important;
    border: none !important;
  }
  .back-home-container .desktop-only {
    display: none !important;
  }
}
</style><style>
@media screen and (max-width: 768px) {
    #penaltyResult {
        font-size: 1.1em;
        padding: 15px 10px;
        line-height: 1.6;
    }
    #penaltyResult table {
        font-size: 1em;
    }
    #penaltyResult .note {
        font-size: 1em;
        padding: 12px;
    }
}
</style>
<style>
/* Hide Mermaid's auto legend next to charts (keep our custom legend below) */
.mermaid .legend { display: none !important; }

/* Remove mobile tap highlight & text selection for the interactive flowchart */
#interactive-flowchart, #interactive-flowchart * {
  -webkit-tap-highlight-color: transparent;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  outline: none;
  user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}
svg#interactive-flowchart {
  -webkit-touch-callout: none;
  -webkit-user-drag: none;
}

</style>
<style>

@media (max-width: 768px) {
  /* Keep the bottom CTA compact (not 100% width) on mobile */
  .penalty-calculator .btn.btn-inline {
    width: auto !important;
    display: inline-block !important;
    padding: 10px 20px !important;
    font-size: 1em !important;
  }
  .penalty-calculator .cta-left-row {
    justify-content: flex-start !important;
  }
}

</style>
</head>
<body>
<div class="back-home-container">
<a href="index.html">
<span class="material-icons">arrow_back</span>
<span class="desktop-only">返回首頁</span>
</a>
</div>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<style>
@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
}
</style>
<style>
.back-home-container {
  margin-bottom: 5px !important;
}
h1 {
  margin-top: 5px !important;
}
body {
  padding-top: 10px !important;
}

@media (max-width: 768px) {
  .back-home-container a {
    position: relative;
    display: inline-block;
  }
  .back-home-container a::before {
    content: "";
    position: absolute;
    top: -30%;
    bottom: -30%;
    left: -30%;
    right: -30%;
    z-index: 1;
  }
  .back-home-container a span {
    position: relative;
    z-index: 2;
  }
}

</style>
<h1>毒品案件法律互動圖解</h1>
<div class="tab">
<button class="tablinks active" onclick="openTab(event, 'overview')" style="font-size: 110% !important;">案件總覽</button>
<button class="tablinks" onclick="openTab(event, 'process')" style="font-size: 110% !important;">處理流程</button>
<button class="tablinks" onclick="openTab(event, 'calculator')" style="font-size: 110% !important;">風險評估</button>
<button class="tablinks" onclick="openTab(event, 'checklist')" style="font-size: 110% !important;">準備清單</button>
<button class="tablinks" onclick="openTab(event, 'penalty')" style="font-size: 110% !important;">刑責計算</button>
<button class="tablinks" onclick="openTab(event, 'documents')" style="font-size: 110% !important;">文件範本</button></div>
<div class="tabcontent" id="overview" style="display: block;">
<div class="card">
<h2>毒品案件基本資訊</h2>
<div class="step">
<div class="step-icon">⚖️</div>
<div>
<h3>什麼是毒品施用與持有案件？</h3>
<p>當個人非經許可而施用或持有第二級毒品（如甲基安非他命）時，即構成《毒品危害防制條例》第11條及第12條之犯罪行為。常見爭議包括：施用行為認定、持有意圖證明、毒品數量計算等。</p>
</div>
</div>
<div class="step">
<div class="step-icon">🛡️</div>
<div>
<h3>您可以爭取的權益</h3>
<ul>
<li>爭取緩起訴處分，避免刑事前科</li>
<li>申請觀察勒戒替代刑罰</li>
<li>針對持有行為爭取不起訴處分</li>
<li>減輕刑責或罰金</li>
<li>保護個人隱私與名譽</li>
</ul>
</div>
</div>
<div class="note" id="riskDisclaimer" style="margin-top:8px; font-size: 90%; color:#666; background:#f9f9f9; border-left:4px solid #4f6c7d; padding:8px 12px;">
  本結果為權重計算之模擬評估，僅供參考，並不構成法律意見；如需進一步協助，請洽本站律師諮詢。
</div>
</div>
<div class="card">
<h2>毒品案件處理時間軸</h2>
<div style="overflow-x: auto; -webkit-overflow-scrolling: touch;"><div class="mermaid" style="min-width: 600px; overflow: visible;">
                gantt
                    title 毒品案件處理時間軸
                    dateFormat  YYYY-MM-DD
                    axisFormat  %m/%d
                    section 偵查階段
                    警方查獲 :done, a1, 2023-01-01, 1d
                    檢察官訊問 :done, a2, after a1, 7d
                    證據調查 :active, a3, 2023-02-01, 30d
                    section 處分階段
                    申請緩起訴 : a4, after a3, 14d
                    觀察勒戒 : a5, after a4, 60d
                    section 審判階段
                    起訴審理 : a6, after a5, 90d
            </div></div>
<p><small>※ 注意：完整流程通常需3-6個月，視案件複雜度而定</small></p>
</div>
<div class="card">
<h2>立即行動建議</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="預約律師版面.html">預約律師諮詢</a>
</div>
</div></div>
<div class="tabcontent" id="process">
<h2>毒品案件處理流程圖解</h2>
<div class="card">
<h3 style="color:#2E4A3F;">毒品案件互動流程圖</h3>
<div style="overflow-x:auto; -webkit-overflow-scrolling:touch; max-width:100%;"><div style="width:1020px;">
<svg display:block;"="" height="400" id="interactive-flowchart" min-width:1000px;="" style="background: #F9F6F1; border: 1px solid #f2f2f2; border-radius: 8px; cursor: pointer;" width="1000 style=">
<!-- 節點 -->
<g class="node" data-name="警方查獲">
<rect fill="#4f6c7d" height="40" rx="8" width="120" x="20" y="180"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="80" y="205">警方查獲</text>
</g>
<g class="node" data-name="證據扣押">
<rect fill="#f2f2f2" height="40" rx="8" width="100" x="170" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="220" y="205">證據扣押</text>
</g>
<g class="node" data-name="檢方訊問">
<rect fill="#d8d8d8" height="40" rx="8" width="100" x="300" y="140"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="350" y="165">檢方訊問</text>
</g>
<g class="node" data-name="自白施用">
<rect fill="#58A4B0" height="40" rx="8" width="100" x="450" y="100"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="500" y="125">自白施用</text>
</g>
<g class="node" data-name="否認持有">
<rect fill="#4f6c7d" height="40" rx="8" width="100" x="450" y="180"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="500" y="205">否認持有</text>
</g>
<g class="node" data-name="申請緩起訴">
<rect fill="#d8d8d8" height="40" rx="8" width="100" x="600" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="650" y="205">申請緩起訴</text>
</g>
<g class="node" data-name="緩起訴處分">
<rect fill="#f2f2f2" height="40" rx="8" width="100" x="730" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="780" y="205">緩起訴處分</text>
</g>
<g class="node" data-name="觀察勒戒">
<rect fill="#58A4B0" height="40" rx="8" width="100" x="730" y="240"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="780" y="265">觀察勒戒</text>
</g>
<g class="node" data-name="起訴審理">
<rect fill="#d8d8d8" height="40" rx="8" width="100" x="600" y="240"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="650" y="265">起訴審理</text>
</g>
<!-- 連線 -->
<line stroke="#333333" stroke-width="2" x1="140" x2="170" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="270" x2="300" y1="200" y2="160"></line>
<line stroke="#333333" stroke-width="2" x1="400" x2="450" y1="160" y2="120"></line>
<line stroke="#333333" stroke-width="2" x1="400" x2="450" y1="160" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="550" x2="600" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="700" x2="730" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="780" x2="780" y1="220" y2="240"></line>
<line stroke="#333333" stroke-width="2" x1="650" x2="730" y1="240" y2="240"></line>
<line stroke="#333333" stroke-dasharray="5,5" stroke-width="2" x1="600" x2="600" y1="220" y2="240"></line>
</svg></div></div>
</div>
<script>
        document.querySelectorAll("#interactive-flowchart .node").forEach(node => {
            node.addEventListener("mouseover", () => {
                node.querySelector("rect").setAttribute("stroke", "#d8d8d8");
                node.querySelector("rect").setAttribute("stroke-width", "3");
            });
            node.addEventListener("mouseout", () => {
                node.querySelector("rect").setAttribute("stroke", "");
                node.querySelector("rect").setAttribute("stroke-width", "");
            });
            node.setAttribute("tabindex", "-1");
            node.addEventListener("touchstart", (e) => {
                e.preventDefault();
                e.stopPropagation();
                const name = node.getAttribute("data-name");
                e && e.preventDefault && e.preventDefault();
                e && e.stopPropagation && e.stopPropagation();
                showCustomModal(getNodeDescription(name));
            }, { passive: false });
            node.addEventListener("click", (e) => {
                const name = node.getAttribute("data-name");
                e && e.preventDefault && e.preventDefault();
                e && e.stopPropagation && e.stopPropagation();
                showCustomModal(getNodeDescription(name));
            });
        });

        function getNodeDescription(name) {
            const descriptions = {
                "警方查獲": "警方依舉報或臨檢發現毒品及相關事證，進行現場調查與扣押。",
                "證據扣押": "警方扣押毒品、吸食器具等相關物證，進行鑑識與證據保全。",
                "檢方訊問": "檢察官訊問嫌疑人，確認施用事實與持有意圖，決定後續處分方向。",
                "自白施用": "嫌疑人承認施用行為，將影響檢察官是否給予緩起訴處分。",
                "否認持有": "嫌疑人否認持有毒品，需檢視證據是否足以證明持有意圖。",
                "申請緩起訴": "透過律師向檢察官提出緩起訴聲請，附上戒癮治療證明等有利證據。",
                "緩起訴處分": "檢察官裁量給予緩起訴，條件可能包括戒癮治療、社會勞動等。",
                "觀察勒戒": "檢察官聲請法院裁定觀察勒戒，屬非刑罰性處分。",
                "起訴審理": "如無緩起訴或觀察勒戒，案件將進入刑事審判程序。"
            };
            return descriptions[name] || "無相關說明";
        }
        </script>
<div class="card">
<h3>各階段說明</h3>
<table>
<tr>
<th>階段</th>
<th>行動建議</th>
<th>所需時間</th>
<th>注意事項</th>
</tr>
<tr>
<td>警方查獲</td>
<td>保持緘默、要求律師在場</td>
<td>立即</td>
<td>勿隨意簽署文件或承認非事實</td>
</tr>
<tr>
<td>檢方訊問</td>
<td>誠實回答、提出有利證據</td>
<td>1-2週</td>
<td>可委任律師陪同應訊</td>
</tr>
<tr>
<td>申請緩起訴</td>
<td>準備戒癮證明、悔過書</td>
<td>1-2週</td>
<td>最佳時機為偵查終結前</td>
</tr>
<tr>
<td>觀察勒戒</td>
<td>配合醫療評估、家屬支持</td>
<td>1-2個月</td>
<td>完成後通常不起訴</td>
</tr>
<tr>
<td>起訴審理</td>
<td>委任律師辯護、爭取減刑</td>
<td>3-6個月</td>
<td>初犯可爭取緩刑</td>
</tr>
</table>
</div>
<div class="card">
<h3>處分結果比例</h3>
<div class="mermaid">
                pie
                    title 毒品案件處分比例
                    "緩起訴" : 50
                    "觀察勒戒" : 30
                    "起訴" : 20
            </div>
<div class="pie-legend" style="display:flex;justify-content:flex-start;gap:16px;margin-top:8px;flex-wrap:wrap;margin-left:1.5cm;">
<div class="legend-item" style="display:flex;align-items:center;gap:8px;font-size:16.1px;">
<span class="swatch" style="width:14px;height:14px;border-radius:3px;border:1px solid rgba(0,0,0,0.1);background:#A5D6A7;"></span>
<span>緩起訴</span>
</div>
<div class="legend-item" style="display:flex;align-items:center;gap:8px;font-size:16.1px;">
<span class="swatch" style="width:14px;height:14px;border-radius:3px;border:1px solid rgba(0,0,0,0.1);background:#FFF59D;"></span>
<span>觀察勒戒</span>
</div>
<div class="legend-item" style="display:flex;align-items:center;gap:8px;font-size:16.1px;">
<span class="swatch" style="width:14px;height:14px;border-radius:3px;border:1px solid rgba(0,0,0,0.1);background:#EF9A9A;"></span>
<span>起訴</span>
</div>
</div>
<p><small>※ 根據近年統計，初犯毒品案件有較高比例獲得緩起訴或觀察勒戒處分</small></p>
</div>
<div class="card">
<h2>立即行動建議</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="預約律師版面.html">預約律師諮詢</a>
</div>
</div></div>
<div class="tabcontent" id="calculator">
<h2>案件風險評估</h2>
<div class="card">
<h3>您的緩起訴成功可能性評估</h3>
<p>請回答以下問題，評估您的緩起訴成功可能性與風險：</p>
<form id="riskAssessment">
<div class="step">
<label for="q1">1. 您是否為初犯？</label>
<select id="q1">
<option value="3">是，無任何毒品前科</option>
<option value="2">曾有施用紀錄但已超過5年</option>
<option value="1">3年內曾有施用紀錄</option>
<option value="0">有多次毒品前科</option>
</select>
</div>
<div class="step">
<label for="q2">2. 您是否有戒癮治療證明？</label>
<select id="q2">
<option value="3">已有完整戒癮治療紀錄</option>
<option value="2">已開始戒癮治療但未完成</option>
<option value="1">願意接受戒癮治療</option>
<option value="0">拒絕戒癮治療</option>
</select>
</div>
<div class="step">
<label for="q3">3. 您是否承認施用行為？</label>
<select id="q3">
<option value="3">完全承認並表達悔意</option>
<option value="2">部分承認</option>
<option value="1">否認但有證據顯示施用</option>
<option value="0">完全否認</option>
</select>
</div>
<div class="step">
<label for="q4">4. 您是否有穩定工作或家庭支持？</label>
<select id="q4">
<option value="3">有穩定工作與家庭支持</option>
<option value="2">有穩定工作或家庭支持</option>
<option value="1">工作不穩定但有意願改善</option>
<option value="0">無業且無家庭支持</option>
</select>
</div>
<div class="step" style="">
<label for="q5">5. 毒品數量與持有證據？</label>
<select id="q5">
<option value="3">微量且無明確持有證據</option>
<option value="2">少量且持有證據薄弱</option>
<option value="1">中量且有部分持有證據</option>
<option value="0">大量且有明確持有證據</option>
</select>
</div>
</form>
<div style="background: #F2E8DF; padding: 12px 15px; margin: 25px 0; border-radius: 6px; font-size: 15px; display: flex; align-items: center;"><span style="font-size: 18px; margin-right: 10px;">ℹ️</span><span>請先完成所有問題的選擇，並點選「確定進行風險評估」按鈕後，即可顯示評估結果。</span></div><h4 style="margin-top: 2px; margin-bottom: 2px; line-height: 1.1;">緩起訴成功可能性評估</h4>
<button class="btn" onclick="calculateRisk()" style="display:block; margin: 20px auto;" type="button">確定進行風險評估</button><div class="risk-meter">
<div class="risk-pointer" id="riskPointer" style="left: 50%;"></div>
</div>
<div class="risk-labels">
<span>低可能性</span>
<span>中等可能性</span>
<span>高可能性</span>
</div>
<div id="riskResult" style="margin-top: 20px;">
<p>請回答所有問題以獲得評估結果</p>
<p></p>
</div>
<div class="note" id="riskDisclaimer" style="margin-top:8px; font-size: 90%; color:#666; background:#f9f9f9; border-left:4px solid #4f6c7d; padding:8px 12px;">
  本結果為模擬評估，僅供參考，並不構成法律意見；如需進一步協助，請洽本站律師諮詢。
</div>
</div>
<div class="card">
<h3>可能結果分析</h3>
<div class="outcome-card positive">
<h4>最佳情況：緩起訴處分</h4>
<p>可能性：50% (初犯、有戒癮證明、表達悔意)</p>
<p>可能內容包括：</p>
<ul>
<li>完成戒癮治療課程</li>
<li>40-80小時社會勞動</li>
<li>繳納1-3萬元公益金</li>
<li>定期尿液檢驗</li>
<li>無刑事前科紀錄</li>
</ul>
</div>
<div class="outcome-card neutral">
<h4>中等情況：觀察勒戒</h4>
<p>可能性：30% (初犯但證據較明確)</p>
<p>可能內容：</p>
<ul>
<li>法院裁定觀察勒戒</li>
<li>1-2個月勒戒期間</li>
<li>完成後通常不起訴</li>
<li>無刑事前科紀錄</li>
</ul>
</div>
<div class="outcome-card negative">
<h4>最差情況：起訴審判</h4>
<p>可能性：20% (非初犯或證據明確)</p>
<p>後續行動建議：</p>
<ul>
<li>爭取減輕刑度</li>
<li>聲請緩刑</li>
<li>準備有利事證</li>
<li>委任律師辯護</li>
</ul>
</div>
<div class="note" id="riskDisclaimer" style="margin-top:8px; font-size: 90%; color:#666; background:#f9f9f9; border-left:4px solid #4f6c7d; padding:8px 12px;">
  本結果為權重計算之模擬評估，僅供參考，並不構成法律意見；如需進一步協助，請洽本站律師諮詢。
</div>
</div>
<div class="card">
<h3>證據效力評估</h3>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">🔍</span>
<span class="evidence-title">毒品鑑定報告</span>
</div>
<p class="evidence-desc">證明查獲物質確為毒品，效力最高，但無法單獨證明施用或持有行為。</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">🖐️</span>
<span class="evidence-title">指紋與生物跡證</span>
</div>
<p class="evidence-desc">吸食器具上的指紋可證明接觸事實，但未必能證明持有或施用。</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">🎤</span>
<span class="evidence-title">自白與供述</span>
</div>
<p class="evidence-desc">承認施用行為的供述效力高，但需注意是否出於自由意志。</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">🏠</span>
<span class="evidence-title">現場位置關係</span>
</div>
<p class="evidence-desc">毒品與個人的相對位置可推論持有可能性，但證明力較間接。</p>
</div>
<div class="note" id="riskDisclaimer" style="margin-top:8px; font-size: 90%; color:#666; background:#f9f9f9; border-left:4px solid #4f6c7d; padding:8px 12px;">
  本結果為權重計算之模擬評估，僅供參考，並不構成法律意見；如需進一步協助，請洽本站律師諮詢。
</div>
</div>
<div class="card">
<h2>立即行動建議</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="預約律師版面.html">預約律師諮詢</a>
</div>
</div></div>
<div class="tabcontent" id="checklist"><div id="checklist-full-content">
<h2>毒品案件準備清單</h2>
<div class="card">
<h3>必要文件檢查表</h3>
<div class="checklist-item">
<input id="check1" type="checkbox"/>
<label for="check1">身分證明文件</label>
</div>
<div class="checklist-item">
<input id="check2" type="checkbox"/>
<label for="check2">戒癮治療證明</label>
</div>
<div class="checklist-item">
<input id="check3" type="checkbox"/>
<label for="check3">工作證明或在學證明</label>
</div>
<div class="checklist-item">
<input id="check4" type="checkbox"/>
<label for="check4">家庭支持證明</label>
</div>
<div class="checklist-item">
<input id="check5" type="checkbox"/>
<label for="check5">悔過書</label>
</div>
<div class="checklist-item">
<input id="check6" type="checkbox"/>
<label for="check6">尿液檢驗報告</label>
</div>
<div class="checklist-item">
<input id="check7" type="checkbox"/>
<label for="check7">保證人資料</label>
</div>
<div class="checklist-item">
<input id="check8" type="checkbox"/>
<label for="check8">其他有利證據</label>
</div>
<button class="btn" onclick="saveChecklist()">儲存檢查表</button>
<button class="btn" onclick="printChecklist()">列印檢查表</button>
</div>
<div class="card">
<h3>訴訟策略檢查表</h3>
<div class="checklist-item">
<input id="safe1" type="checkbox"/>
<label for="safe1">確認是否爭取緩起訴</label>
</div>
<div class="checklist-item">
<input id="safe2" type="checkbox"/>
<label for="safe2">準備戒癮治療計畫</label>
</div>
<div class="checklist-item">
<input id="safe3" type="checkbox"/>
<label for="safe3">評估持有行為爭點</label>
</div>
<div class="checklist-item">
<input id="safe4" type="checkbox"/>
<label for="safe4">準備社會勞動方案</label>
</div>
<div class="checklist-item">
<input id="safe5" type="checkbox"/>
<label for="safe5">評估公益金繳納能力</label>
</div>
</div>

</div>
<div class="card">
<h2>立即行動建議</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="預約律師版面.html">預約律師諮詢</a>
</div>
</div></div>
<div class="tabcontent penalty-calculator" id="penalty">
<h1>毒品案件刑責模擬</h1>
<div class="note">
        📘 <strong>說明：</strong><br/>
        本工具依據《毒品危害防制條例》第11條、第12條，判斷施用與持有第二級毒品之刑責範圍，
        並模擬可能之處分結果。初犯通常可爭取緩起訴或觀察勒戒，非初犯則可能面臨刑罰。
    </div>
<h2>⚖️ 案件基本設定</h2>
<table id="penaltyTable">
<tr>
<th>項目</th>
<th>內容</th>
</tr>
<tr>
<td>是否初犯</td>
<td>
<select id="firstTime">
<option value="yes">是，無任何毒品前科</option>
<option value="no">否，曾有毒品前科</option>
</select>
</td>
</tr>
<tr>
<td>是否自白</td>
<td>
<select id="confession">
<option value="full">完全自白並表達悔意</option>
<option value="partial">部分自白</option>
<option value="none">否認犯行</option>
</select>
</td>
</tr>
<tr>
<td>毒品數量</td>
<td>
<select id="amount">
<option value="small">微量（例如：0.5公克以下）</option>
<option value="medium">少量（例如：0.5-5公克）</option>
<option value="large">中量（例如：5-10公克）</option>
<option value="xl">大量（例如：10公克以上）</option>
</select>
</td>
</tr>
</table>
<h2>🛡️ 有利因素</h2>
<table id="benefitTable">
<tr>
<th>因素</th>
<th>是否具備</th>
</tr>
<tr>
<td>已進行戒癮治療</td>
<td>
<select>
<option value="yes">是，已有完整治療紀錄</option>
<option value="partial">是，但治療中未完成</option>
<option value="no">否，尚未開始治療</option>
</select>
</td>
</tr>
<tr>
<td>有穩定工作或學籍</td>
<td>
<select>
<option value="yes">是，有穩定工作/在學</option>
<option value="no">否，目前無業/休學</option>
</select>
</td>
</tr>
<tr>
<td>家庭支持系統</td>
<td>
<select>
<option value="yes">是，有家人支持</option>
<option value="no">否，無家庭支持</option>
</select>
</td>
</tr>
</table>
<button class="btn" onclick="calculatePenalty()">模擬刑責結果</button>
<h2>模擬結果</h2>
<div id="penaltyResult"></div>
<div class="cta-left-row" style="display: flex; justify-content: flex-start; margin-top: 20px; margin-bottom: 20px;">
<a class="btn btn-inline" href="預約律師版面.html">預約律師諮詢</a>
</div>
</div><div class="tabcontent inheritance-calculator" id="documents">
<h2 style="color: #2c3e50; margin-top: 20px;">📁 常用文件範本</h2>
<div class="card">
<h3>緩起訴聲請書範本</h3>
<textarea style="width:100%; height:200px; margin-bottom:15px;">
聲請人：某甲 （身分證字號：A123456789）
住址：某市某區某路某號
電話：09XXXXXXXX

為聲請緩起訴處分事：

一、聲請意旨：
聲請人因涉嫌違反毒品危害防制條例案件，現由 貴署偵查中（案號：113年度偵字第XXXX號），謹依法聲請緩起訴處分。

二、事實經過：
聲請人於民國113年X月X日，在某處遭警方查獲涉嫌施用第二級毒品，業已坦承犯行，深表悔悟。

三、聲請理由：
(一) 聲請人為初犯，素行良好，無任何前科紀錄。
(二) 聲請人已自費進行戒癮治療（附治療證明），並持續接受心理輔導。
(三) 聲請人有正當工作（附在職證明），家庭支持系統完整。
(四) 聲請人願接受檢察官指示之條件，包括：
    1. 完成戒癮治療課程
    2. 參與社會勞動XX小時
    3. 繳納公益金新臺幣XX萬元整
    4. 定期接受尿液檢驗

四、證據清單：
1. 戒癮治療證明書
2. 在職證明書
3. 戶口名簿影本
4. 良民證

五、結語：
懇請 鈞署鑒核，惠予緩起訴處分，給予聲請人自新機會。

謹狀
某地方檢察署 公鑒

聲請人：某甲 （簽名蓋章）
中華民國113年X月X日
            </textarea>
<button class="btn" onclick="downloadTextFile('probation-request.txt', this.previousElementSibling.value)">下載範本</button>
</div>
<div class="card">
<h3>悔過書範例</h3>
<textarea style="width:100%; height:300px; margin-bottom:15px;">
悔過書

本人某甲，身分證字號：A123456789，因涉嫌違反毒品危害防制條例案件，深感懊悔，特立此悔過書表明悔悟之意。

一、犯行經過：
本人於民國113年X月X日，在某處因一時好奇而嘗試施用第二級毒品，遭警方查獲。此行為已違反法律規定，危害自身健康與社會秩序。

二、悔悟表示：
(一) 本人已深刻反省，完全認知施用毒品之違法性與危害性。
(二) 本人自案發後已主動尋求戒癮治療（附治療證明），並持續接受心理輔導。
(三) 本人保證絕不再犯，並願接受法律規定之處分與條件。

三、未來規劃：
(一) 持續接受戒癮治療與心理輔導，徹底遠離毒品。
(二) 積極參與社會勞動，回饋社會。
(三) 專注於工作與家庭，成為守法公民。

四、結語：
本人誠心悔過，懇請給予自新機會，未來定當潔身自愛，絕不再觸犯法律。

立悔過書人：某甲 （簽名蓋章）
身分證字號：A123456789
住址：某市某區某路某號
中華民國113年X月X日
            </textarea>
<button class="btn" onclick="downloadTextFile('statement-of-repentance.txt', this.previousElementSibling.value)">下載範本</button>
</div>
<div class="card">
<h2>立即行動建議</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="預約律師版面.html">預約律師諮詢</a>
</div>
</div>
</div>
<script>
        // 初始化Mermaid圖表
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                pie1: '#A5D6A7',
                pie2: '#FFF59D',
                pie3: '#EF9A9A'
            }
        });

        // 切換標籤頁
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // 計算風險評估
        function calculateRisk() {
            const q1 = parseInt(document.getElementById('q1').value);
            const q2 = parseInt(document.getElementById('q2').value);
            const q3 = parseInt(document.getElementById('q3').value);
            const q4 = parseInt(document.getElementById('q4').value);
            const q5 = parseInt(document.getElementById('q5').value);
            
            const total = q1 + q2 + q3 + q4 + q5;
            const percentage = (total / 15) * 100;
            
            // 更新指針位置
            document.getElementById('riskPointer').style.left = `${percentage}%`;
            
            // 顯示評估結果
            let resultText = "";
            let recommendation = "";
            
            if (percentage >= 80) {
                resultText = "<p style='color:#58A4B0;font-weight:bold;'>高可能性：極可能獲緩起訴處分</p>";
                recommendation = "建議完整提出戒癮證明與悔過書，成功機會很高。";
            } else if (percentage >= 50) {
                resultText = "<p style='color:#FFC107;font-weight:bold;'>中等可能性：可能獲觀察勒戒</p>";
                recommendation = "建議加強戒癮治療證明與家庭支持文件，爭取最佳處分。";
            } else {
                resultText = "<p style='color:#4f6c7d;font-weight:bold;'>低可能性：可能面臨起訴</p>";
                recommendation = "建議委任律師辯護，爭取減輕刑責或緩刑。";
            }
            
            document.getElementById('riskResult').innerHTML = resultText + "<p>" + recommendation + "</p>";
        }

        // 儲存檢查表狀態
        function saveChecklist() {
            showCustomModal('檢查表狀態已儲存（此為演示功能，實際需搭配後端儲存）');
        }

        // 列印檢查表
        function printChecklist() {
            window.print();
        }

        // 刑責計算器功能
        function calculatePenalty() {
            const firstTime = document.getElementById('firstTime').value;
            const confession = document.getElementById('confession').value;
            const amount = document.getElementById('amount').value;
            
            let resultHtml = `<table>
                <tr><th>評估因素</th><th>內容</th></tr>
                <tr><td>是否初犯</td><td>${firstTime === 'yes' ? '是，無前科' : '否，有前科'}</td></tr>
                <tr><td>自白程度</td><td>${getConfessionText(confession)}</td></tr>
                <tr><td>毒品數量</td><td>${getAmountText(amount)}</td></tr>
            </table>`;
            
            if (firstTime === 'yes') {
                resultHtml += `<div class="note" style="background:#E8F5E9;border-left-color:#4CAF50;">
                    <strong>分析：</strong>初犯施用第二級毒品，依實務見解可優先考慮緩起訴處分或觀察勒戒。
                    <ul>
                        <li>緩起訴可能性：70-90%</li>
                        <li>觀察勒戒可能性：10-30%</li>
                        <li>起訴可能性：低於5%</li>
                    </ul>
                </div>`;
            } else {
                resultHtml += `<div class="note" style="background:#FFEBEE;border-left-color:#F44336;">
                    <strong>分析：</strong>非初犯施用第二級毒品，可能面臨刑事起訴，刑度範圍：
                    <ul>
                        <li>有期徒刑：3月-2年</li>
                        <li>罰金：新臺幣1-30萬元</li>
                        <li>可聲請緩刑條件：認罪、有正當工作、完成戒癮治療</li>
                    </ul>
                </div>`;
            }
            
            resultHtml += `<div class="note">
                <strong>行動建議：</strong>
                <ul>
                    <li>儘速進行戒癮治療並保留證明</li>
                    <li>準備工作證明與家庭支持文件</li>
                    <li>委任律師撰寫緩起訴聲請狀</li>
                    <li>如非初犯，應準備減刑事證</li>
                </ul>
            </div>`;
            
            document.getElementById('penaltyResult').innerHTML = resultHtml;
        }
        
        function getConfessionText(value) {
            const texts = {
                'full': '完全自白並表達悔意',
                'partial': '部分自白',
                'none': '否認犯行'
            };
            return texts[value] || '';
        }
        
        function getAmountText(value) {
            const texts = {
                'small': '微量（0.5公克以下）',
                'medium': '少量（0.5-5公克）',
                'large': '中量（5-10公克）',
                'xl': '大量（10公克以上）'
            };
            return texts[value] || '';
        }

        window.onload = function() {
            // 初始化標籤頁
            document.getElementById('overview').style.display = 'block';
        };
    </script>
<!-- 引入 html2pdf.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function saveChecklist() {
    const element = document.getElementById('checklist-full-content');
    const opt = {
        margin:       [0.2, 0.2, 0.2, 0.2],
        filename:     '毒品案件準備清單.pdf',
        image:        { type: 'jpeg', quality: 1 },
        html2canvas:  { scale: 2, useCORS: true, scrollY: 0 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' },
        pagebreak:    { mode: ['avoid-all'] }
    };
    html2pdf().set(opt).from(element).save();
}

function downloadTextFile(filename, content) {
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = filename;
    link.click();
}
</script>
<style>
/* 自訂彈窗背景 */
.custom-modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.4);
    z-index: 9998;
}
/* 自訂彈窗 */
.custom-modal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: #FFFFFF;
    border-radius: 12px;
    width: 400px;
    max-width: 90%;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    z-index: 9999;
    padding: 20px;
    font-family: "Microsoft JhengHei", sans-serif;
}
.custom-modal-header { display: none; }
.custom-modal-body {
    font-size: 16px;
    color: #333;
    margin-bottom: 15px;
    white-space: pre-wrap;
}
.custom-modal-close { background: #58A4B0; color: #FFFFFF; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px;  display: block; margin: 12px auto 8px;}
.custom-modal-close:hover { background: #4a909b; color: #FFFFFF; }
</style>
<!-- 自訂彈窗 HTML 結構 -->
<div class="custom-modal-overlay" id="customModalOverlay">
<div class="custom-modal">
<div class="custom-modal-body" id="customModalContent"></div>
<button class="custom-modal-close" onclick="closeCustomModal()">確定</button>
</div>
</div>
<script>
function showCustomModal(message) {
    document.getElementById('customModalContent').innerText = message;
    document.getElementById('customModalOverlay').style.display = 'block';
}
function closeCustomModal() {
    document.getElementById('customModalOverlay').style.display = 'none';
}
</script>
</body>
</html>