<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>æœªæˆå¹´å­å¥³è¦ªæ¬Šæ­¸å±¬æ³•å¾‹è‡ªåŠ©åˆ†æå·¥å…·</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background: #F2E8DF;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #4f6c7d;
            padding-bottom: 10px;
        }
        .step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-left: 4px solid #4f6c7d;
        }
        .step-icon {
            font-size: 24px;
            margin-right: 15px;
            color: #4f6c7d;
        }
        .btn {
            display: inline-block;
            background: #4f6c7d;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #c0392b;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #4f6c7d;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #F2E8DF;
        }
        #calculator {
            background: #f2f2f2;
            padding: 20px;
            border-radius: 10px;
        }
        input, select {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
        .result {
            font-weight: bold;
            color: #4f6c7d;
            font-size: 18px;
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            border-radius: 5px 5px 0 0;
        }
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }
        .tab button:hover {
            background-color: #ddd;
        }
        .tab button.active {
            background-color: #4f6c7d;
            color: white;
        }
        .tabcontent {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 5px 5px;
            animation: fadeEffect 1s;
        }
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .checklist-item {
            margin-bottom: 10px;
        }
        .checklist-item input {
            width: auto;
            margin-right: 10px;
        }
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #4f6c7d;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
        }
        .container {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
        }
        .container::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background-color: white;
            border: 4px solid #4f6c7d;
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        .left {
            left: 0;
        }
        .right {
            left: 50%;
        }
        .left::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            right: 30px;
            border: medium solid #F2E8DF;
            border-width: 10px 0 10px 10px;
            border-color: transparent transparent transparent #F2E8DF;
        }
        .right::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            left: 30px;
            border: medium solid #F2E8DF;
            border-width: 10px 10px 10px 0;
            border-color: transparent #F2E8DF transparent transparent;
        }
        .right::after {
            left: -16px;
        }
        .content {
            padding: 20px 30px;
            background-color: white;
            position: relative;
            border-radius: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .content h3 {
            color: #4f6c7d;
            margin-top: 0;
        }
        .risk-meter {
            height: 30px;
            background: linear-gradient(to right, #4CAF50, #FFC107, #F44336);
            border-radius: 15px;
            margin: 20px 0;
            position: relative;
        }
        .risk-pointer {
            position: absolute;
            width: 2px;
            height: 40px;
            background: black;
            top: -5px;
            transform: translateX(-50%);
        }
        .risk-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }
        .outcome-card {
            border-left: 5px solid;
            padding: 15px;
            margin: 10px 0;
            background: white;
        }
        .positive {
            border-left-color: #58A4B0;
        }
        .negative {
            border-left-color: #4f6c7d;
        }
        .neutral {
            border-left-color: #FFC107;
        }
        .evidence-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .evidence-icon {
            font-size: 20px;
            margin-right: 10px;
            color: #4f6c7d;
        }
        .evidence-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .evidence-desc {
            font-size: 14px;
            color: #666;
        }
        .protection-item {
            margin-bottom: 10px;
            padding: 10px;
            background: #F2E8DF;
            border-radius: 5px;
        }
        .protection-title {
            font-weight: bold;
            color: #4f6c7d;
        }
        /* è¦ªæ¬Šè©•ä¼°è¨ˆç®—å™¨å°ˆç”¨æ¨£å¼ */
        .custody-calculator {
            background: #F2E8DF;
            padding: 20px;
            border-radius: 10px;
        }
        .custody-calculator h1, 
        .custody-calculator h2, 
        .custody-calculator h3 {
            color: #4f6c7d;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .custody-calculator h1 {
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            border-bottom: 2px solid #4f6c7d;
            padding-bottom: 10px;
        }
        .custody-calculator .btn {
            background: #4f6c7d;
        }
        .custody-calculator .btn:hover {
            background: #58A4B0;
        }
        .custody-calculator th {
            background-color: #4f6c7d;
        }
        .custody-calculator .note {
            background: #f2f2f2;
            border-left: 4px solid #4f6c7d;
            padding: 10px;
            margin: 10px 0;
            color: #333;
        }
    
@media screen and (max-width: 768px) {
    body {
        padding: 10px;
    }
    .card, .step, .tabcontent, .timeline .content {
        padding: 10px;
        font-size: 14px;
    }
    .step-icon {
        font-size: 18px;
        margin-right: 10px;
    }
    .timeline {
        padding-left: 0;
        padding-right: 0;
    }
    svg#interactive-flowchart {
        width: 100%;
        height: auto;
    }
    .tab button {
        font-size: 12px;
        padding: 10px;
    }
    table, th, td {
        font-size: 12px;
        padding: 8px;
    }
    .risk-labels {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }
    /* è¦ªæ¬Šè©•ä¼°è¨ˆç®—å™¨éŸ¿æ‡‰å¼ */
    .custody-calculator h1 {
        font-size: 1.5em;
    }
    .custody-calculator h2 {
        font-size: 1.2em;
    }
    .custody-calculator table {
        display: block;
        width: 100%;
        overflow-x: auto;
    }
    .custody-calculator th, 
    .custody-calculator td {
        padding: 8px;
        font-size: 0.9em;
    }
    .custody-calculator input, 
    .custody-calculator select {
        padding: 8px;
        font-size: 1em;
    }
    .custody-calculator .btn {
        width: 100%;
        padding: 12px 0;
        margin: 10px 0;
        font-size: 1em;
    }
    .custody-calculator .note {
        font-size: 0.9em;
        padding: 8px;
    }
}
</style>
</head>
<body>
<h1>æœªæˆå¹´å­å¥³è¦ªæ¬Šæ­¸å±¬æ³•å¾‹äº’å‹•åœ–è§£</h1>
<div class="tab">
<button class="tablinks active" onclick="openTab(event, 'overview')" style="font-size: 110% !important;">æ¡ˆä»¶ç¸½è¦½</button>
<button class="tablinks" onclick="openTab(event, 'process')" style="font-size: 110% !important;">è™•ç†æµç¨‹</button>
<button class="tablinks" onclick="openTab(event, 'calculator')" style="font-size: 110% !important;">é¢¨éšªè©•ä¼°</button>
<button class="tablinks" onclick="openTab(event, 'checklist')" style="font-size: 110% !important;">æº–å‚™æ¸…å–®</button>
<button class="tablinks" onclick="openTab(event, 'custody')" style="font-size: 110% !important;">è¦ªæ¬Šè©•ä¼°</button>
</div>
<div class="tabcontent" id="overview" style="display: block;">
<div class="card">
<h2>è¦ªæ¬Šæ­¸å±¬åŸºæœ¬è³‡è¨Š</h2>
<div class="step">
<div class="step-icon">âš–ï¸</div>
<div>
<h3>ä»€éº¼æ˜¯è¦ªæ¬Šæ­¸å±¬è£åˆ¤ï¼Ÿ</h3>
<p>ç•¶çˆ¶æ¯é›¢å©šæˆ–åˆ†å±…æ™‚ï¼Œè‹¥ç„¡æ³•å°±æœªæˆå¹´å­å¥³çš„è¦ªæ¬Šï¼ˆç›£è­·æ¬Šï¼‰æ­¸å±¬é”æˆå”è­°ï¼Œå¯å‘æ³•é™¢è²è«‹è£åˆ¤ï¼Œç”±æ³•é™¢ä¾æ³•æ±ºå®šå­å¥³çš„è¦ªæ¬Šæ­¸å±¬èˆ‡æ¢è¦–å®‰æ’ã€‚æ³•é™¢å°‡ä»¥ã€Œå­å¥³æœ€ä½³åˆ©ç›Šã€ç‚ºæœ€é«˜æŒ‡å°åŸå‰‡é€²è¡Œè£å®šã€‚</p>
</div>
</div>
<div class="step">
<div class="step-icon">ğŸ›¡ï¸</div>
<div>
<h3>æ‚¨å¯ä»¥ç²å¾—çš„ä¿éšœ</h3>
<ul>
<li>ç¢ºä¿å­å¥³ç”Ÿæ´»èˆ‡æ•™é¤Šçš„ç©©å®šæ€§</li>
<li>ä¾æ³•å–å¾—é©åˆå­å¥³æˆé•·çš„è¦ªæ¬Šå®‰æ’</li>
<li>æ³•é™¢å¯å‘½ç›£ç£æ€§æ¢è¦–ä¿éšœå­å¥³å®‰å…¨</li>
<li>å°çˆ­è­°äº‹é …é€²è¡Œèª¿æŸ¥èˆ‡è©•ä¼°</li>
<li>è²è«‹ä¿è­·æªæ–½é˜²æ­¢ä¸ç•¶æ¥è§¸</li>
</ul>
</div>
</div>
</div>
<div class="card">
<h2>è¦ªæ¬Šæ­¸å±¬ç”³è«‹æ™‚é–“è»¸</h2>
<div style="overflow-x: auto; -webkit-overflow-scrolling: touch;"><div class="mermaid" style="min-width: 600px; overflow: visible;">
                gantt
                    title è¦ªæ¬Šæ­¸å±¬è£åˆ¤æµç¨‹æ™‚é–“è»¸
                    dateFormat  YYYY-MM-DD
                    axisFormat  %m/%d
                    section æº–å‚™éšæ®µ
                    å­å¥³ç…§é¡§ç´€éŒ„æ•´ç† :done, a1, 2023-01-01, 14d
                    å”è­°è¦ªæ¬Šå˜—è©¦ :done, a2, after a1, 30d
                    section è¨´è¨Ÿéšæ®µ
                    æå‡ºè²è«‹ :done, a3, 2023-03-01, 7d
                    æ³•é™¢å¯©ç† :active, a4, 2023-04-01, 90d
                    è£åˆ¤ç¢ºå®š : a5, after a4, 30d
                    section åŸ·è¡Œéšæ®µ
                    è¦ªæ¬Šå®‰æ’åŸ·è¡Œ : a6, after a5, 60d
            </div></div>
<p><small>â€» æ³¨æ„ï¼šå®Œæ•´æµç¨‹é€šå¸¸éœ€4-8å€‹æœˆï¼Œè¦–æ¡ˆä»¶è¤‡é›œåº¦è€Œå®š</small></p>
</div>
</div>
<div class="tabcontent" id="process">
<h2>è¦ªæ¬Šæ­¸å±¬ç”³è«‹æµç¨‹åœ–è§£</h2>
<div class="card">
<h3 style="color:#2E4A3F;">è¦ªæ¬Šæ­¸å±¬è£åˆ¤äº’å‹•æµç¨‹åœ–</h3>
<div style="overflow-x:auto; -webkit-overflow-scrolling:touch; max-width:100%;"><div style="width:1020px;">
<svg display:block;"="" height="400" id="interactive-flowchart" min-width:1000px;="" style="background: #F9F6F1; border: 1px solid #f2f2f2; border-radius: 8px; cursor: pointer;" width="1000 style=">
<!-- ç¯€é» -->
<g class="node" data-name="çˆ¶æ¯åˆ†å±…/é›¢å©š">
<rect fill="#4f6c7d" height="40" rx="8" width="120" x="20" y="180"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="80" y="205">çˆ¶æ¯åˆ†å±…/é›¢å©š</text>
</g>
<g class="node" data-name="å­å¥³ç…§é¡§ç¾æ³è©•ä¼°">
<rect fill="#f2f2f2" height="40" rx="8" width="140" x="170" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="240" y="205">å­å¥³ç…§é¡§ç¾æ³è©•ä¼°</text>
</g>
<g class="node" data-name="å”è­°è¦ªæ¬Šå˜—è©¦">
<rect fill="#d8d8d8" height="40" rx="8" width="120" x="340" y="140"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="400" y="165">å”è­°è¦ªæ¬Šå˜—è©¦</text>
</g>
<g class="node" data-name="é”æˆå”è­°">
<rect fill="#58A4B0" height="40" rx="8" width="100" x="490" y="100"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="540" y="125">é”æˆå”è­°</text>
</g>
<g class="node" data-name="è²è«‹è£åˆ¤">
<rect fill="#4f6c7d" height="40" rx="8" width="100" x="490" y="180"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="540" y="205">è²è«‹è£åˆ¤</text>
</g>
<g class="node" data-name="æ³•é™¢å¯©ç†">
<rect fill="#d8d8d8" height="40" rx="8" width="100" x="620" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="670" y="205">æ³•é™¢å¯©ç†</text>
</g>
<g class="node" data-name="è£åˆ¤ç¢ºå®š">
<rect fill="#f2f2f2" height="40" rx="8" width="100" x="750" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="800" y="205">è£åˆ¤ç¢ºå®š</text>
</g>
<g class="node" data-name="åŸ·è¡Œè¦ªæ¬Šå®‰æ’">
<rect fill="#58A4B0" height="40" rx="8" width="140" x="750" y="240"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="820" y="265">åŸ·è¡Œè¦ªæ¬Šå®‰æ’</text>
</g>
<g class="node" data-name="ç›£ç£æ¢è¦–">
<rect fill="#d8d8d8" height="40" rx="8" width="100" x="620" y="240"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="670" y="265">ç›£ç£æ¢è¦–</text>
</g>
<!-- é€£ç·š -->
<line stroke="#333333" stroke-width="2" x1="140" x2="170" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="310" x2="340" y1="200" y2="160"></line>
<line stroke="#333333" stroke-width="2" x1="460" x2="490" y1="160" y2="120"></line>
<line stroke="#333333" stroke-width="2" x1="460" x2="490" y1="160" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="590" x2="620" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="720" x2="750" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="800" x2="800" y1="220" y2="240"></line>
<line stroke="#333333" stroke-width="2" x1="670" x2="750" y1="240" y2="240"></line>
<line stroke="#333333" stroke-dasharray="5,5" stroke-width="2" x1="620" x2="620" y1="220" y2="240"></line>
</svg></div></div>
</div>
<script>
        document.querySelectorAll("#interactive-flowchart .node").forEach(node => {
            node.addEventListener("mouseover", () => {
                node.querySelector("rect").setAttribute("stroke", "#d8d8d8");
                node.querySelector("rect").setAttribute("stroke-width", "3");
            });
            node.addEventListener("mouseout", () => {
                node.querySelector("rect").setAttribute("stroke", "");
                node.querySelector("rect").setAttribute("stroke-width", "");
            });
            node.addEventListener("click", () => {
                const name = node.getAttribute("data-name");
                alert("æ‚¨é»æ“Šäº†ç¯€é»ï¼šã€Œ" + name + "ã€\n\n" + getNodeDescription(name));
            });
        });

        function getNodeDescription(name) {
            const descriptions = {
                "çˆ¶æ¯åˆ†å±…/é›¢å©š": "çˆ¶æ¯å©šå§»é—œä¿‚çµæŸæ™‚ï¼Œéœ€æ±ºå®šæœªæˆå¹´å­å¥³çš„è¦ªæ¬Šæ­¸å±¬èˆ‡æ¢è¦–å®‰æ’ã€‚æ³•é™¢å°‡ä»¥å­å¥³æœ€ä½³åˆ©ç›Šç‚ºæœ€é«˜è€ƒé‡åŸå‰‡ã€‚",
                "å­å¥³ç…§é¡§ç¾æ³è©•ä¼°": "è©•ä¼°ç›®å‰å­å¥³çš„ä¸»è¦ç…§é¡§è€…ã€ç”Ÿæ´»ç’°å¢ƒã€æ•™è‚²ç‹€æ³åŠå¿ƒç†ä¾é™„é—œä¿‚ï¼Œæ­¤ç‚ºæ³•é™¢è£åˆ¤çš„é‡è¦ä¾æ“šã€‚",
                "å”è­°è¦ªæ¬Šå˜—è©¦": "çˆ¶æ¯æ‡‰å…ˆå˜—è©¦å”è­°è¦ªæ¬Šæ­¸å±¬èˆ‡æ¢è¦–æ–¹å¼ï¼Œå¯é€éå®¶åº­æœƒè­°ã€èª¿è§£ç­‰æ–¹å¼å”å•†ã€‚å”è­°å…§å®¹æ‡‰ä»¥æ›¸é¢ç‚ºä¹‹ã€‚",
                "é”æˆå”è­°": "å¦‚èƒ½é”æˆå”è­°ï¼Œæ‡‰è¨‚ç«‹è¦ªæ¬Šå”è­°æ›¸ä¸¦ç¶“æ³•é™¢èªå¯ï¼Œå®Œæˆæ³•å¾‹ç¨‹åºã€‚",
                "è²è«‹è£åˆ¤": "å‘å­å¥³ä½æ‰€åœ°ä¹‹ç®¡è½„æ³•é™¢æå‡ºè²è«‹ï¼Œéœ€é™„å­å¥³ç¾æ³èªªæ˜ã€å”è­°å¤±æ•—è­‰æ˜åŠè¦ªæ¬Šå®‰æ’å»ºè­°ã€‚",
                "æ³•é™¢å¯©ç†": "æ³•é™¢å°‡èª¿æŸ¥å­å¥³ç‹€æ³ï¼Œå¿…è¦æ™‚å‘½ç¤¾å·¥è¨ªè¦–æˆ–å¿ƒç†è©•ä¼°ï¼Œä¸¦è½å–å„æ–¹æ„è¦‹å¾Œè£å®šè¦ªæ¬Šæ­¸å±¬èˆ‡æ¢è¦–æ–¹å¼ã€‚",
                "è£åˆ¤ç¢ºå®š": "æ³•é™¢è£å®šå¾Œï¼Œå¦‚ç„¡äººæŠ—å‘Šå³ç¢ºå®šï¼Œå¯æŒè£å®šæ›¸è¾¦ç†ç›¸é—œæ‰‹çºŒã€‚",
                "åŸ·è¡Œè¦ªæ¬Šå®‰æ’": "ä¾è£å®šå…§å®¹è¾¦ç†è¦ªæ¬Šè¡Œä½¿ã€æ¢è¦–å®‰æ’ç­‰å¯¦éš›åŸ·è¡Œç¨‹åºã€‚",
                "ç›£ç£æ¢è¦–": "å¦‚è£å®šç›£ç£æ¢è¦–ï¼Œæ‡‰ç”±æŒ‡å®šæ©Ÿæ§‹æˆ–äººå“¡é™ªåŒé€²è¡Œæ¢è¦–ï¼Œç¢ºä¿å­å¥³å®‰å…¨èˆ‡ç¦ç¥‰ã€‚"
            };
            return descriptions[name] || "ç„¡ç›¸é—œèªªæ˜";
        }
        </script>
<div class="card">
<h3>å„éšæ®µèªªæ˜</h3>
<table>
<tr>
<th>éšæ®µ</th>
<th>è¡Œå‹•å»ºè­°</th>
<th>æ‰€éœ€æ™‚é–“</th>
<th>æ³¨æ„äº‹é …</th>
</tr>
<tr>
<td>å­å¥³ç…§é¡§ç¾æ³è©•ä¼°</td>
<td>æ•´ç†å­å¥³æ—¥å¸¸ç”Ÿæ´»ã€æ•™è‚²èˆ‡é†«ç™‚ç´€éŒ„</td>
<td>1-2å€‹æœˆ</td>
<td>å¯å‘å­¸æ ¡ã€é†«ç™‚æ©Ÿæ§‹å–å¾—ç›¸é—œè­‰æ˜</td>
</tr>
<tr>
<td>å”è­°è¦ªæ¬Š</td>
<td>å¬é–‹è¦ªæ¬Šå”å•†æœƒè­°</td>
<td>1-3å€‹æœˆ</td>
<td>å»ºè­°ä½œæˆæ›¸é¢ç´€éŒ„</td>
</tr>
<tr>
<td>è²è«‹è£åˆ¤</td>
<td>æº–å‚™è²è«‹ç‹€åŠè­‰æ“š</td>
<td>1-2é€±</td>
<td>å¯å§”ä»»å¾‹å¸«è¾¦ç†</td>
</tr>
<tr>
<td>æ³•é™¢å¯©ç†</td>
<td>é…åˆæ³•é™¢èª¿æŸ¥èˆ‡ç¤¾å·¥è¨ªè¦–</td>
<td>3-6å€‹æœˆ</td>
<td>å¿…è¦æ™‚æå‡ºè¦ªæ¬Šè¨ˆç•«æ›¸</td>
</tr>
<tr>
<td>åŸ·è¡Œè¦ªæ¬Šå®‰æ’</td>
<td>ä¾è£å®šè¾¦ç†ç›¸é—œæ‰‹çºŒ</td>
<td>1-2å€‹æœˆ</td>
<td>éœ€éµå®ˆæ³•é™¢è£å®šæ¢ä»¶</td>
</tr>
</table>
</div>
<div class="card">
<h3>æ³•é™¢è£åˆ¤è¦ªæ¬Šæ¯”ä¾‹</h3>
<div class="mermaid">
                pie
                    title è¦ªæ¬Šè£åˆ¤æ–¹å¼æ¯”ä¾‹
                    "å–®ç¨è¦ªæ¬Š" : 60
                    "å…±åŒè¦ªæ¬Š" : 30
                    "å…¶ä»–å®‰æ’" : 10
            </div>
<p><small>â€» æ ¹æ“šè¿‘å¹´æ³•é™¢çµ±è¨ˆï¼Œä¸»è¦ç…§é¡§è€…é€šå¸¸ç²å–®ç¨è¦ªæ¬Šï¼Œå…±åŒè¦ªæ¬Šéœ€é›™æ–¹æœ‰è‰¯å¥½åˆä½œåŸºç¤</small></p>
</div>
</div>
<div class="tabcontent" id="calculator">
<h2>æ¡ˆä»¶é¢¨éšªè©•ä¼°</h2>
<div class="card">
<h3>æ‚¨çš„è¦ªæ¬Šè£åˆ¤æˆåŠŸå¯èƒ½æ€§è©•ä¼°</h3>
<p>è«‹å›ç­”ä»¥ä¸‹å•é¡Œï¼Œè©•ä¼°æ‚¨çš„è¦ªæ¬Šè£åˆ¤æˆåŠŸå¯èƒ½æ€§èˆ‡é¢¨éšªï¼š</p>
<form id="riskAssessment">
<div class="step">
<label for="q1">1. å­å¥³ä¸»è¦ç…§é¡§è€…æ˜¯å¦æ˜ç¢ºï¼Ÿ</label>
<select id="q1">
<option value="3">é•·æœŸç”±æˆ‘ä¸»è¦ç…§é¡§ï¼Œæœ‰å®Œæ•´ç´€éŒ„</option>
<option value="2">ä¸»è¦ç”±æˆ‘ç…§é¡§ï¼Œä½†éƒ¨åˆ†ç´€éŒ„ä¸å®Œæ•´</option>
<option value="1">é›™æ–¹å…±åŒç…§é¡§ï¼Œç„¡æ˜é¡¯ä¸»è¦ç…§é¡§è€…</option>
<option value="0">ä¸»è¦ç”±å°æ–¹ç…§é¡§</option>
</select>
</div>
<div class="step">
<label for="q2">2. å­å¥³èˆ‡æ‚¨çš„ä¾é™„é—œä¿‚å¼·åº¦ï¼Ÿ</label>
<select id="q2">
<option value="3">å­å¥³æ˜é¡¯ä¾è³´ä¸”æƒ…æ„Ÿæ·±åš</option>
<option value="2">å­å¥³èˆ‡æˆ‘é—œä¿‚è‰¯å¥½</option>
<option value="1">å­å¥³èˆ‡é›™æ–¹é—œä¿‚ç›¸ç•¶</option>
<option value="0">å­å¥³èˆ‡å°æ–¹é—œä¿‚è¼ƒå¯†åˆ‡</option>
</select>
</div>
<div class="step">
<label for="q3">3. å°æ–¹æ˜¯å¦æœ‰ä¸ç•¶ç…§é¡§è¡Œç‚ºï¼Ÿ</label>
<select id="q3">
<option value="3">æ›¾æœ‰æš´åŠ›ã€è™å¾…æˆ–ç–æ–¼ç…§é¡§ç´€éŒ„</option>
<option value="2">æœ‰ä¸ç•¶è¡Œç‚ºä½†æœªé”æš´åŠ›ç¨‹åº¦</option>
<option value="1">å¶æœ‰ä¸ç•¶è¡Œç‚ºä½†ç„¡åš´é‡å½±éŸ¿</option>
<option value="0">ç„¡æ˜é¡¯ä¸ç•¶è¡Œç‚º</option>
</select>
</div>
<div class="step">
<label for="q4">4. æ‚¨æå‡ºçš„è¦ªæ¬Šè¨ˆç•«å®Œæ•´æ€§ï¼Ÿ</label>
<select id="q4">
<option value="3">æœ‰å®Œæ•´æ•™é¤Šè¨ˆç•«èˆ‡ç’°å¢ƒè¦åŠƒ</option>
<option value="2">æœ‰åŸºæœ¬æ•™é¤Šè¨ˆç•«</option>
<option value="1">è¨ˆç•«ä¸å¤ å…·é«”</option>
<option value="0">ç„¡å…·é«”è¨ˆç•«</option>
</select>
</div>
<div class="step" style="">
<label for="q5">5. æ˜¯å¦æœ‰ç¬¬ä¸‰æ–¹æ”¯æŒè­‰æ“šï¼Ÿ</label>
<select id="q5">
<option value="3">å­¸æ ¡ã€ç¤¾å·¥ã€é†«ç™‚æ©Ÿæ§‹å‡æ”¯æŒ</option>
<option value="2">éƒ¨åˆ†æ©Ÿæ§‹æ”¯æŒ</option>
<option value="1">åƒ…æœ‰è¦ªå‹æ”¯æŒ</option>
<option value="0">ç„¡ç¬¬ä¸‰æ–¹æ”¯æŒ</option>
</select>
</div>
</form>
<div style="background: #F2E8DF; padding: 12px 15px; margin: 25px 0; border-radius: 6px; font-size: 15px; display: flex; align-items: center;"><span style="font-size: 18px; margin-right: 10px;">â„¹ï¸</span><span>è«‹å…ˆå®Œæˆæ‰€æœ‰å•é¡Œçš„é¸æ“‡ï¼Œä¸¦é»é¸ã€Œç¢ºå®šé€²è¡Œé¢¨éšªè©•ä¼°ã€æŒ‰éˆ•å¾Œï¼Œå³å¯é¡¯ç¤ºè©•ä¼°çµæœã€‚</span></div><h4 style="margin-top: 2px; margin-bottom: 2px; line-height: 1.1;">è¦ªæ¬Šè£åˆ¤æˆåŠŸå¯èƒ½æ€§è©•ä¼°</h4>
<button class="btn" onclick="calculateRisk()" style="display:block; margin: 20px auto;" type="button">ç¢ºå®šé€²è¡Œé¢¨éšªè©•ä¼°</button><div class="risk-meter">
<div class="risk-pointer" id="riskPointer" style="left: 50%;"></div>
</div>
<div class="risk-labels">
<span>ä½å¯èƒ½æ€§</span>
<span>ä¸­ç­‰å¯èƒ½æ€§</span>
<span>é«˜å¯èƒ½æ€§</span>
</div>
<div id="riskResult" style="margin-top: 20px;">
<p>è«‹å›ç­”æ‰€æœ‰å•é¡Œä»¥ç²å¾—è©•ä¼°çµæœ</p>
<p style="font-size: 90%; color: #666;">æœ¬AIåˆ†æçµæœä¸å…·æ³•å¾‹æ•ˆåŠ›åƒ…ä¾›åƒè€ƒï¼Œå¦‚éœ€é€²ä¸€æ­¥å”åŠ©ï¼Œè«‹æ´½æœ¬ç«™å¾‹å¸«è«®è©¢ã€‚</p><p></p>
</div>
</div>
<div class="card">
<h3>å¯èƒ½çµæœåˆ†æ</h3>
<div class="outcome-card positive">
<h4>æœ€ä½³æƒ…æ³ï¼šæ ¸ç™¼å–®ç¨è¦ªæ¬Š</h4>
<p>å¯èƒ½æ€§ï¼š60% (ä¸»è¦ç…§é¡§è€…æ˜ç¢ºã€æ•™é¤Šç’°å¢ƒç©©å®šã€å°æ–¹æœ‰ä¸ç•¶è¡Œç‚º)</p>
<p>å¯èƒ½å…§å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>è£å®šç”±æ‚¨å–®ç¨è¡Œä½¿è¦ªæ¬Š</li>
<li>å°æ–¹æ¢è¦–æ¬Šå—ä¸€å®šé™åˆ¶</li>
<li>å‘½å°æ–¹æ”¯ä»˜æ‰¶é¤Šè²»</li>
<li>å…·é«”è¦ç¯„æ¢è¦–æ™‚é–“èˆ‡æ–¹å¼</li>
<li>å¿…è¦æ™‚å‘½ç›£ç£æ¢è¦–</li>
</ul>
</div>
<div class="outcome-card neutral">
<h4>ä¸­ç­‰æƒ…æ³ï¼šå…±åŒè¦ªæ¬Šä½†ä¸»è¦å±…ä½æ¬Š</h4>
<p>å¯èƒ½æ€§ï¼š30% (é›™æ–¹å‡æœ‰ç…§é¡§èƒ½åŠ›ä½†æ‚¨ç‚ºä¸»è¦ç…§é¡§è€…)</p>
<p>å¯èƒ½å…§å®¹ï¼š</p>
<ul>
<li>è£å®šå…±åŒè¦ªæ¬Šä½†å­å¥³èˆ‡æ‚¨åŒä½</li>
<li>å°æ–¹æœ‰å›ºå®šæ¢è¦–æ™‚é–“</li>
<li>é‡å¤§äº‹é …éœ€é›™æ–¹åŒæ„</li>
<li>å‘½é›™æ–¹åƒåŠ è¦ªè·æ•™è‚²</li>
</ul>
</div>
<div class="outcome-card negative">
<h4>æœ€å·®æƒ…æ³ï¼šå°æ–¹å–å¾—è¦ªæ¬Šæˆ–éœ€è£œæ­£</h4>
<p>å¯èƒ½æ€§ï¼š10% (è­‰æ“šä¸è¶³æˆ–ç¨‹åºç‘•ç–µ)</p>
<p>å¾ŒçºŒè¡Œå‹•å»ºè­°ï¼š</p>
<ul>
<li>è£œå¼·æ•™é¤Šèƒ½åŠ›è­‰æ˜</li>
<li>è²è«‹æš«æ™‚è™•åˆ†</li>
<li>å°‹æ±‚å°ˆæ¥­è©•ä¼°å ±å‘Š</li>
<li>è€ƒæ…®èª¿è§£ç¨‹åº</li>
</ul>
</div>
</div>
<div class="card">
<h3>è­‰æ“šæ•ˆåŠ›è©•ä¼°</h3>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ“„</span>
<span class="evidence-title">å­¸æ ¡èˆ‡é†«ç™‚ç´€éŒ„</span>
</div>
<p class="evidence-desc">æ•ˆåŠ›æœ€é«˜ï¼Œå»ºè­°å‘å­¸æ ¡ã€é†«ç™‚æ©Ÿæ§‹ç”³è«‹æ­£å¼ç´€éŒ„ï¼Œè­‰æ˜æ‚¨é•·æœŸåƒèˆ‡å­å¥³æ•™é¤Šèˆ‡ç…§é¡§ã€‚</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ </span>
<span class="evidence-title">å±…ä½ç’°å¢ƒè­‰æ˜</span>
</div>
<p class="evidence-desc">å±…ä½ç’°å¢ƒç…§ç‰‡ã€ç§Ÿç´„æˆ–æ‰€æœ‰æ¬Šç‹€å¯è­‰æ˜æ‚¨èƒ½æä¾›ç©©å®šé©åˆæˆé•·ç’°å¢ƒã€‚</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ’¬</span>
<span class="evidence-title">æºé€šç´€éŒ„</span>
</div>
<p class="evidence-desc">èˆ‡å°æ–¹çš„é€šè¨Šç´€éŒ„ã€å”å•†éç¨‹å¯è­‰æ˜å”è­°å¤±æ•—äº‹å¯¦ï¼Œæé«˜è£åˆ¤å¿…è¦æ€§ã€‚</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ”</span>
<span class="evidence-title">ç¤¾å·¥æˆ–å¿ƒç†è©•ä¼°å ±å‘Š</span>
</div>
<p class="evidence-desc">å°ˆæ¥­æ©Ÿæ§‹çš„è©•ä¼°å ±å‘Šå°æ³•é™¢æœ‰é«˜åº¦åƒè€ƒåƒ¹å€¼ï¼Œå¯è­‰æ˜å­å¥³æœ€ä½³åˆ©ç›Šæ‰€åœ¨ã€‚</p>
</div>
</div>
</div>
<div class="tabcontent" id="checklist"><div id="checklist-full-content">
<h2>è¦ªæ¬Šè£åˆ¤ç”³è«‹æº–å‚™æ¸…å–®</h2>
<div class="card">
<h3>å¿…è¦æ–‡ä»¶æª¢æŸ¥è¡¨</h3>
<div class="checklist-item">
<input id="check1" type="checkbox"/>
<label for="check1">è¦ªæ¬Šè²è«‹ç‹€ï¼ˆå¯å‘æ³•é™¢ç´¢å–ç¯„æœ¬ï¼‰</label>
</div>
<div class="checklist-item">
<input id="check2" type="checkbox"/>
<label for="check2">å­å¥³å‡ºç”Ÿè­‰æ˜åŠæˆ¶ç±è³‡æ–™</label>
</div>
<div class="checklist-item">
<input id="check3" type="checkbox"/>
<label for="check3">å©šå§»ç‹€æ³è­‰æ˜ï¼ˆçµå©š/é›¢å©šè­‰æ˜ï¼‰</label>
</div>
<div class="checklist-item">
<input id="check4" type="checkbox"/>
<label for="check4">å­å¥³ç…§é¡§ç´€éŒ„èˆ‡åƒèˆ‡è­‰æ˜</label>
</div>
<div class="checklist-item">
<input id="check5" type="checkbox"/>
<label for="check5">å­¸æ ¡èˆ‡é†«ç™‚æ©Ÿæ§‹å‡ºå…·ä¹‹è­‰æ˜</label>
</div>
<div class="checklist-item">
<input id="check6" type="checkbox"/>
<label for="check6">å”è­°è¦ªæ¬Šå¤±æ•—è­‰æ˜ï¼ˆå¦‚æœƒè­°ç´€éŒ„ï¼‰</label>
</div>
<div class="checklist-item">
<input id="check7" type="checkbox"/>
<label for="check7">å±…ä½ç’°å¢ƒèˆ‡ç¶“æ¿Ÿèƒ½åŠ›è­‰æ˜</label>
</div>
<div class="checklist-item">
<input id="check8" type="checkbox"/>
<label for="check8">å…¶ä»–æœ‰åˆ©è­‰æ“šï¼ˆé€šè¨Šç´€éŒ„ã€è­‰äººç­‰ï¼‰</label>
</div>
<button class="btn" onclick="saveChecklist()">å„²å­˜æª¢æŸ¥è¡¨</button>
<button class="btn" onclick="printChecklist()">åˆ—å°æª¢æŸ¥è¡¨</button>
</div>
<div class="card">
<h3>è¨´è¨Ÿç­–ç•¥æª¢æŸ¥è¡¨</h3>
<div class="checklist-item">
<input id="safe1" type="checkbox"/>
<label for="safe1">ç¢ºå®šæœ€æœ‰åˆ©çš„è¦ªæ¬Šæ–¹æ¡ˆ</label>
</div>
<div class="checklist-item">
<input id="safe2" type="checkbox"/>
<label for="safe2">è©•ä¼°æ˜¯å¦è²è«‹æš«æ™‚è™•åˆ†</label>
</div>
<div class="checklist-item">
<input id="safe3" type="checkbox"/>
<label for="safe3">æº–å‚™è¦ªæ¬Šè¨ˆç•«æ›¸ä¾›æ³•é™¢åƒè€ƒ</label>
</div>
<div class="checklist-item">
<input id="safe4" type="checkbox"/>
<label for="safe4">ç¢ºèªå­å¥³æ„é¡˜ï¼ˆå¦‚å¹´é½¡é©ç•¶ï¼‰</label>
</div>
<div class="checklist-item">
<input id="safe5" type="checkbox"/>
<label for="safe5">è©•ä¼°èª¿è§£å¯èƒ½æ€§</label>
</div>
</div>
</div>
</div>
<div class="tabcontent custody-calculator" id="custody">
<h1>è¦ªæ¬Šè©•ä¼°èˆ‡æ¢è¦–å®‰æ’æ¨¡æ“¬</h1>
<div class="note">
        ğŸ“˜ <strong>èªªæ˜ï¼š</strong><br/>
        æœ¬å·¥å…·ä¾æ“šæ°‘æ³•ç¬¬1055æ¢ï¼Œä»¥æœªæˆå¹´å­å¥³æœ€ä½³åˆ©ç›Šç‚ºåŸå‰‡ï¼Œè©•ä¼°è¦ªæ¬Šæ­¸å±¬å¯èƒ½æ€§èˆ‡æ¢è¦–å®‰æ’å»ºè­°ã€‚
        æ³•é™¢å°‡ç¶œåˆè€ƒé‡å­å¥³å¹´é½¡ã€çˆ¶æ¯ç…§é¡§èƒ½åŠ›ã€å­å¥³æ„é¡˜ï¼ˆå¦‚å¹´é½¡é©ç•¶ï¼‰ã€ç¾æœ‰ç”Ÿæ´»ç‹€æ³ç­‰å› ç´ ä½œå‡ºè£å®šã€‚
    </div>
<h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­æˆå“¡è¨­å®š</h2>
<table id="familyTable">
<tr>
<th>æˆå“¡å§“å</th>
<th>èº«ä»½</th>
<th>ç…§é¡§èƒ½åŠ›è©•ä¼°</th>
<th>è¦ªæ¬Šå¯èƒ½æ€§</th>
</tr>
<tr>
<td><input type="text" value="æ¯è¦ª"/></td>
<td>
<select onchange="updateCustody()" style="min-width: 80px; max-width: 120px;">
<option value="ä¸»è¦ç…§é¡§è€…">ä¸»è¦ç…§é¡§è€…</option>
<option value="éä¸»è¦ç…§é¡§è€…">éä¸»è¦ç…§é¡§è€…</option>
<option value="å…±åŒç…§é¡§è€…">å…±åŒç…§é¡§è€…</option>
<option value="å–æ¶ˆ">å–æ¶ˆ</option>
</select>
</td>
<td class="statusCell">è¨ˆç®—ä¸­</td>
<td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
</tr>
<tr>
<td><input type="text" value="çˆ¶è¦ª"/></td>
<td>
<select onchange="updateCustody()" style="min-width: 80px; max-width: 120px;">
<option value="éä¸»è¦ç…§é¡§è€…">éä¸»è¦ç…§é¡§è€…</option>
<option value="ä¸»è¦ç…§é¡§è€…">ä¸»è¦ç…§é¡§è€…</option>
<option value="å…±åŒç…§é¡§è€…">å…±åŒç…§é¡§è€…</option>
<option value="å–æ¶ˆ">å–æ¶ˆ</option>
</select>
</td>
<td class="statusCell">è¨ˆç®—ä¸­</td>
<td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
</tr>
</table>
<button class="btn" onclick="addFamilyMember()">æ–°å¢å®¶åº­æˆå“¡</button>
<h2>ğŸ‘¶ å­å¥³åŸºæœ¬è³‡æ–™</h2>
<table id="childTable">
<tr>
<th>å­å¥³å§“å</th>
<th>å¹´é½¡</th>
<th>ä¸»è¦ç…§é¡§è€…</th>
<th>ç‰¹æ®Šéœ€æ±‚</th>
</tr>
<tr>
<td><input type="text" value="å­å¥³A"/></td>
<td><input type="number" value="7"/></td>
<td><input type="text" value="æ¯è¦ª"/></td>
<td><input type="text" placeholder="ä¾‹å¦‚ï¼šç„¡"/></td>
</tr>
</table>
<button class="btn" onclick="addChild()">æ–°å¢å­å¥³</button>
<h2>ğŸ“… æ¢è¦–å®‰æ’æ¨¡æ“¬</h2>
<table id="visitTable">
<tr>
<th>æ¢è¦–æ–¹å¼</th>
<th>é »ç‡</th>
<th>é©åˆæƒ…æ³</th>
</tr>
<tr>
<td><input type="text" value="ç›£ç£æ¢è¦–"/></td>
<td><input type="text" value="æ¯æœˆ2æ¬¡"/></td>
<td><input type="text" value="æ›¾æœ‰è¡çªæˆ–ä¸ç•¶è¡Œç‚º"/></td>
</tr>
<tr>
<td><input type="text" value="ä¸€èˆ¬æ¢è¦–"/></td>
<td><input type="text" value="æ¯é€±æœ«"/></td>
<td><input type="text" value="é—œä¿‚è‰¯å¥½ç„¡é‡å¤§è¡çª"/></td>
</tr>
</table>
<button class="btn" onclick="addVisitOption()">æ–°å¢æ¢è¦–é¸é …</button>
<button class="btn" onclick="calculateCustody()">è¨ˆç®—è¦ªæ¬Šèˆ‡æ¢è¦–å»ºè­°</button>
<h2>è¨ˆç®—çµæœ</h2>
<div id="custodyResult"></div>
</div>
<div class="card">
<h2>ç«‹å³è¡Œå‹•å»ºè­°</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="#">é ç´„å¾‹å¸«è«®è©¢</a>
<a class="btn" download="" href="è¦ªæ¬Šè²è«‹ç‹€ç¯„æœ¬ä¸‹è¼‰.docx">ä¸‹è¼‰è²è«‹ç‹€ç¯„æœ¬</a>
</div>
</div>
<script>
        // åˆå§‹åŒ–Mermaidåœ–è¡¨
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                pie1: '#A5D6A7',
                pie2: '#FFF59D',
                pie3: '#EF9A9A'
            }
        });

        // åˆ‡æ›æ¨™ç±¤é 
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // è¨ˆç®—é¢¨éšªè©•ä¼°
        function calculateRisk() {
            const q1 = parseInt(document.getElementById('q1').value);
            const q2 = parseInt(document.getElementById('q2').value);
            const q3 = parseInt(document.getElementById('q3').value);
            const q4 = parseInt(document.getElementById('q4').value);
            const q5 = parseInt(document.getElementById('q5').value);
            
            const total = q1 + q2 + q3 + q4 + q5;
            const percentage = (total / 15) * 100;
            
            // æ›´æ–°æŒ‡é‡ä½ç½®
            document.getElementById('riskPointer').style.left = `${percentage}%`;
            
            // é¡¯ç¤ºè©•ä¼°çµæœ
            let resultText = "";
            let recommendation = "";
            
            if (percentage >= 80) {
                resultText = "<p style='color:#58A4B0;font-weight:bold;'>é«˜å¯èƒ½æ€§ï¼šæ¥µå¯èƒ½ç²æœ‰åˆ©è¦ªæ¬Šè£å®š</p>";
                recommendation = "å»ºè­°å®Œæ•´æå‡ºè¦ªæ¬Šè¨ˆç•«ä¸¦é™„å…·æ‰€æœ‰è­‰æ“šï¼Œæ³•é™¢å¾ˆå¯èƒ½æ¡ç´æ‚¨çš„è²è«‹å…§å®¹ã€‚";
            } else if (percentage >= 50) {
                resultText = "<p style='color:#FFC107;font-weight:bold;'>ä¸­ç­‰å¯èƒ½æ€§ï¼šå¯èƒ½ç²éƒ¨åˆ†æ¡ç´</p>";
                recommendation = "å»ºè­°åŠ å¼·æ•™é¤Šèƒ½åŠ›çš„è­‰æ“šåŠ›ï¼Œæå‡ºæ›´å…·å½ˆæ€§çš„è¦ªæ¬Šæ–¹æ¡ˆä¾›æ³•é™¢åƒè€ƒã€‚";
            } else {
                resultText = "<p style='color:#4f6c7d;font-weight:bold;'>ä½å¯èƒ½æ€§ï¼šå¯èƒ½é¢è‡¨è²è«‹å›°é›£</p>";
                recommendation = "å»ºè­°ç«‹å³è£œå¼·è­‰æ“šï¼Œç‰¹åˆ¥æ˜¯å­å¥³ç…§é¡§èˆ‡æ•™é¤Šèƒ½åŠ›çš„è­‰æ˜ï¼Œè€ƒæ…®è²è«‹æš«æ™‚è™•åˆ†ã€‚";
            }
            
            document.getElementById('riskResult').innerHTML = resultText + "<p>" + recommendation + "</p>";
        }

        // å„²å­˜æª¢æŸ¥è¡¨ç‹€æ…‹
        function saveChecklist() {
            alert('æª¢æŸ¥è¡¨ç‹€æ…‹å·²å„²å­˜ï¼ˆæ­¤ç‚ºæ¼”ç¤ºåŠŸèƒ½ï¼Œå¯¦éš›éœ€æ­é…å¾Œç«¯å„²å­˜ï¼‰');
        }

        // åˆ—å°æª¢æŸ¥è¡¨
        function printChecklist() {
            window.print();
        }

        // è¦ªæ¬Šè©•ä¼°è¨ˆç®—å™¨åŠŸèƒ½
        function addFamilyMember() {
            const table = document.getElementById('familyTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td><input type="text" placeholder="æˆå“¡å§“å"></td>
                <td>
                    <select style="min-width: 80px; max-width: 120px;" onchange="updateCustody()">
                        <option value="ä¸»è¦ç…§é¡§è€…">ä¸»è¦ç…§é¡§è€…</option>
                        <option value="éä¸»è¦ç…§é¡§è€…">éä¸»è¦ç…§é¡§è€…</option>
                        <option value="å…±åŒç…§é¡§è€…">å…±åŒç…§é¡§è€…</option>
                        <option value="å–æ¶ˆ">å–æ¶ˆ</option>
                    </select>
                </td>
                <td class="statusCell">è¨ˆç®—ä¸­</td>
                <td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
            `;
        }

        function addChild() {
            const table = document.getElementById('childTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td><input type="text" placeholder="å­å¥³å§“å"></td>
                <td><input type="number" placeholder="å¹´é½¡"></td>
                <td><input type="text" placeholder="ä¸»è¦ç…§é¡§è€…"></td>
                <td><input type="text" placeholder="ç‰¹æ®Šéœ€æ±‚"></td>
            `;
        }

        function addVisitOption() {
            const table = document.getElementById('visitTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td><input type="text" placeholder="ä¾‹å¦‚ï¼šéå¤œæ¢è¦–"></td>
                <td><input type="text" placeholder="ä¾‹å¦‚ï¼šæ¯æœˆä¸€æ¬¡"></td>
                <td><input type="text" placeholder="é©åˆæƒ…æ³"></td>
            `;
        }

        function updateCustody() {
            const rows = document.querySelectorAll('#familyTable tr');
            let primaryCount = 0, secondaryCount = 0, jointCount = 0;
            rows.forEach((row, idx) => {
                if (idx === 0) return;
                const role = row.cells[1].querySelector('select').value;
                if (role === 'ä¸»è¦ç…§é¡§è€…') primaryCount++;
                if (role === 'éä¸»è¦ç…§é¡§è€…') secondaryCount++;
                if (role === 'å…±åŒç…§é¡§è€…') jointCount++;
            });

            rows.forEach((row, idx) => {
                if (idx === 0) return;
                const role = row.cells[1].querySelector('select').value;
                let status = "è©•ä¼°ä¸­";
                let share = "è¨ˆç®—ä¸­";

                if (role === 'ä¸»è¦ç…§é¡§è€…') {
                    status = "é«˜ç…§é¡§èƒ½åŠ›";
                    share = "70%-90%";
                } else if (role === 'éä¸»è¦ç…§é¡§è€…') {
                    status = "ä¸€èˆ¬ç…§é¡§èƒ½åŠ›";
                    share = "10%-30%";
                } else if (role === 'å…±åŒç…§é¡§è€…') {
                    status = "å…±åŒç…§é¡§èƒ½åŠ›";
                    share = "40%-60%";
                }

                row.cells[2].textContent = status;
                row.cells[3].textContent = share;
            });
        }

        function calculateCustody() {
            const familyRows = document.querySelectorAll('#familyTable tr');
            const childRows = document.querySelectorAll('#childTable tr');
            let primaryCaregiver = "";
            let caregivers = [];
            
            familyRows.forEach((row, idx) => {
                if (idx === 0) return;
                const name = row.cells[0].querySelector('input').value.trim();
                const role = row.cells[1].querySelector('select').value;
                if (role === 'ä¸»è¦ç…§é¡§è€…') primaryCaregiver = name;
                caregivers.push({name: name, role: role});
            });

            let children = [];
            childRows.forEach((row, idx) => {
                if (idx === 0) return;
                const name = row.cells[0].querySelector('input').value.trim();
                const age = row.cells[1].querySelector('input').value;
                const mainCaregiver = row.cells[2].querySelector('input').value.trim();
                const specialNeeds = row.cells[3].querySelector('input').value.trim();
                children.push({name: name, age: age, mainCaregiver: mainCaregiver, specialNeeds: specialNeeds});
            });

            const visitRows = document.querySelectorAll('#visitTable tr');
            let visitOptions = [];
            visitRows.forEach((row, idx) => {
                if (idx === 0) return;
                const type = row.cells[0].querySelector('input').value.trim();
                const frequency = row.cells[1].querySelector('input').value.trim();
                const suitableFor = row.cells[2].querySelector('input').value.trim();
                visitOptions.push({type: type, frequency: frequency, suitableFor: suitableFor});
            });

            let resultHtml = `<h3>è¦ªæ¬Šè©•ä¼°çµæœ</h3><table><tr><th>å®¶åº­æˆå“¡</th><th>è§’è‰²</th><th>è¦ªæ¬Šå¯èƒ½æ€§</th><th>æ³•å¾‹èªªæ˜</th></tr>`;
            
            caregivers.forEach(cg => {
                let legalNote = "";
                if (cg.role === 'ä¸»è¦ç…§é¡§è€…') {
                    legalNote = "æ³•é™¢é€šå¸¸å„ªå…ˆè€ƒæ…®ç”±ä¸»è¦ç…§é¡§è€…å–å¾—è¦ªæ¬Šï¼Œä»¥ç¶­æŒå­å¥³ç”Ÿæ´»ç©©å®šæ€§ã€‚";
                } else if (cg.role === 'éä¸»è¦ç…§é¡§è€…') {
                    legalNote = "éä¸»è¦ç…§é¡§è€…é€šå¸¸å¯å–å¾—æ¢è¦–æ¬Šï¼Œè¦ªæ¬Šå¯èƒ½æ€§è¼ƒä½é™¤éæœ‰ç‰¹æ®Šæƒ…æ³ã€‚";
                } else {
                    legalNote = "å…±åŒç…§é¡§è€…å¯èƒ½å–å¾—å…±åŒè¦ªæ¬Šï¼Œéœ€è­‰æ˜é›™æ–¹æœ‰è‰¯å¥½åˆä½œèƒ½åŠ›ã€‚";
                }
                
                resultHtml += `<tr>
                    <td>${cg.name}</td>
                    <td>${cg.role}</td>
                    <td>${cg.role === 'ä¸»è¦ç…§é¡§è€…' ? 'é«˜' : cg.role === 'éä¸»è¦ç…§é¡§è€…' ? 'ä½' : 'ä¸­ç­‰'}</td>
                    <td>${legalNote}</td>
                </tr>`;
            });
            
            resultHtml += `</table>`;
            
            resultHtml += `<h3>å­å¥³ç‹€æ³åˆ†æ</h3><table><tr><th>å­å¥³å§“å</th><th>å¹´é½¡</th><th>ä¸»è¦ç…§é¡§è€…</th><th>æ³•é™¢è€ƒé‡å› ç´ </th></tr>`;
            
            children.forEach(child => {
                let factors = [];
                if (child.age < 6) factors.push("å¹´å¹¼å­å¥³é€šå¸¸èˆ‡ä¸»è¦ç…§é¡§è€…åŒä½");
                if (child.mainCaregiver === primaryCaregiver) factors.push("ç¾æœ‰ä¸»è¦ç…§é¡§é—œä¿‚ç©©å®š");
                if (child.specialNeeds) factors.push("æœ‰ç‰¹æ®Šéœ€æ±‚éœ€å°ˆæ¥­ç…§é¡§");
                factors.push(child.age >= 12 ? "å¹´æ»¿12æ­²ï¼Œæ³•é™¢å°‡è€ƒé‡å­å¥³æ„é¡˜" : "æœªæ»¿12æ­²ï¼Œä»¥å®¢è§€æ¢ä»¶ç‚ºä¸»");
                
                resultHtml += `<tr>
                    <td>${child.name}</td>
                    <td>${child.age}æ­²</td>
                    <td>${child.mainCaregiver}</td>
                    <td>${factors.join('ï¼›')}</td>
                </tr>`;
            });
            
            resultHtml += `</table>`;
            
            resultHtml += `<h3>æ¢è¦–å®‰æ’å»ºè­°</h3><table><tr><th>æ¢è¦–æ–¹å¼</th><th>é »ç‡</th><th>é©åˆæƒ…æ³</th><th>æ³•å¾‹æ•ˆæœ</th></tr>`;
            
            visitOptions.forEach(opt => {
                let legalEffect = "";
                if (opt.type.includes('ç›£ç£')) {
                    legalEffect = "éœ€ç”±ç¤¾å·¥æˆ–æŒ‡å®šæ©Ÿæ§‹ç›£ç£é€²è¡Œï¼Œé©ç”¨æ–¼æœ‰å®‰å…¨ç–‘æ…®æƒ…æ³";
                } else if (opt.type.includes('éå¤œ')) {
                    legalEffect = "éœ€é›™æ–¹æœ‰é«˜åº¦ä¿¡ä»»èˆ‡åˆä½œåŸºç¤ï¼Œå­å¥³å¹´é½¡é€šå¸¸éœ€è¼ƒå¤§";
                } else {
                    legalEffect = "æ¨™æº–æ¢è¦–å®‰æ’ï¼Œé©ç”¨æ–¼ç„¡é‡å¤§è¡çªæƒ…æ³";
                }
                
                resultHtml += `<tr>
                    <td>${opt.type}</td>
                    <td>${opt.frequency}</td>
                    <td>${opt.suitableFor}</td>
                    <td>${legalEffect}</td>
                </tr>`;
            });
            
            resultHtml += `</table>`;
            
            resultHtml += `<div style="margin-top:20px; padding:15px; background:#f2f2f2; border-left:4px solid #4f6c7d;"><strong>ç¸½çµå»ºè­°ï¼š</strong><br>`;
            
            if (primaryCaregiver) {
                resultHtml += `åŸºæ–¼å­å¥³æœ€ä½³åˆ©ç›ŠåŸå‰‡ï¼Œå»ºè­°ç”± ${primaryCaregiver} å–å¾—å–®ç¨è¦ªæ¬Šï¼Œå¦ä¸€æ–¹ä¾æƒ…æ³çµ¦äºˆé©ç•¶æ¢è¦–æ¬Šã€‚`;
            } else if (caregivers.some(c => c.role === 'å…±åŒç…§é¡§è€…')) {
                resultHtml += `å¦‚é›™æ–¹èƒ½è‰¯å¥½åˆä½œï¼Œå¯è€ƒæ…®å…±åŒè¦ªæ¬Šå®‰æ’ï¼Œä½†éœ€æ˜ç¢ºè¦ç¯„å±…ä½èˆ‡æ±ºç­–æ©Ÿåˆ¶ã€‚`;
            } else {
                resultHtml += `å»ºè­°é€²ä¸€æ­¥è©•ä¼°å­å¥³å…·é«”éœ€æ±‚èˆ‡çˆ¶æ¯ç…§é¡§èƒ½åŠ›ï¼Œä»¥æ±ºå®šæœ€é©è¦ªæ¬Šå®‰æ’ã€‚`;
            }
            
            resultHtml += `</div>`;
            
            document.getElementById('custodyResult').innerHTML = resultHtml;
        }

        window.onload = function() {
            updateCustody();
            // åˆå§‹åŒ–æ¨™ç±¤é 
            document.getElementById('overview').style.display = 'block';
        };

        document.querySelectorAll('#familyTable').forEach(table => {
            table.addEventListener('change', function(e) {
                if (e.target && e.target.tagName === 'SELECT') {
                    if (e.target.value === 'å–æ¶ˆ') {
                        const row = e.target.closest('tr');
                        row.parentNode.removeChild(row);
                        updateCustody(); // Recalculate after removal
                    }
                }
            });
        });
    </script>
<!-- å¼•å…¥ html2pdf.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function saveChecklist() {
    const element = document.getElementById('checklist-full-content');
    const opt = {
        margin:       [0.2, 0.2, 0.2, 0.2],
        filename:     'è¦ªæ¬Šè£åˆ¤æº–å‚™æ¸…å–®.pdf',
        image:        { type: 'jpeg', quality: 1 },
        html2canvas:  { scale: 2, useCORS: true, scrollY: 0 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' },
        pagebreak:    { mode: ['avoid-all'] }
    };
    html2pdf().set(opt).from(element).save();
}
</script>
</body>
</html>