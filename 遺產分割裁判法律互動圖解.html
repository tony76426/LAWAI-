<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>éºç”¢åˆ†å‰²è£åˆ¤æ³•å¾‹è‡ªåŠ©åˆ†æå·¥å…·</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }
        .step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-left: 4px solid #e74c3c;
        }
        .step-icon {
            font-size: 24px;
            margin-right: 15px;
            color: #e74c3c;
        }
        .btn {
            display: inline-block;
            background: #e74c3c;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #c0392b;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #e74c3c;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        #calculator {
            background: #fce8e8;
            padding: 20px;
            border-radius: 10px;
        }
        input, select {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
        .result {
            font-weight: bold;
            color: #e74c3c;
            font-size: 18px;
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            border-radius: 5px 5px 0 0;
        }
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }
        .tab button:hover {
            background-color: #ddd;
        }
        .tab button.active {
            background-color: #e74c3c;
            color: white;
        }
        .tabcontent {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 5px 5px;
            animation: fadeEffect 1s;
        }
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .checklist-item {
            margin-bottom: 10px;
        }
        .checklist-item input {
            width: auto;
            margin-right: 10px;
        }
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #e74c3c;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
        }
        .container {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
        }
        .container::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background-color: white;
            border: 4px solid #e74c3c;
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        .left {
            left: 0;
        }
        .right {
            left: 50%;
        }
        .left::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            right: 30px;
            border: medium solid #f9f9f9;
            border-width: 10px 0 10px 10px;
            border-color: transparent transparent transparent #f9f9f9;
        }
        .right::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            left: 30px;
            border: medium solid #f9f9f9;
            border-width: 10px 10px 10px 0;
            border-color: transparent #f9f9f9 transparent transparent;
        }
        .right::after {
            left: -16px;
        }
        .content {
            padding: 20px 30px;
            background-color: white;
            position: relative;
            border-radius: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .content h3 {
            color: #e74c3c;
            margin-top: 0;
        }
        .risk-meter {
            height: 30px;
            background: linear-gradient(to right, #4CAF50, #FFC107, #F44336);
            border-radius: 15px;
            margin: 20px 0;
            position: relative;
        }
        .risk-pointer {
            position: absolute;
            width: 2px;
            height: 40px;
            background: black;
            top: -5px;
            transform: translateX(-50%);
        }
        .risk-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }
        .outcome-card {
            border-left: 5px solid;
            padding: 15px;
            margin: 10px 0;
            background: white;
        }
        .positive {
            border-left-color: #4CAF50;
        }
        .negative {
            border-left-color: #F44336;
        }
        .neutral {
            border-left-color: #FFC107;
        }
        .evidence-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .evidence-icon {
            font-size: 20px;
            margin-right: 10px;
            color: #e74c3c;
        }
        .evidence-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .evidence-desc {
            font-size: 14px;
            color: #666;
        }
        .protection-item {
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
        }
        .protection-title {
            font-weight: bold;
            color: #e74c3c;
        }
        /* æ‡‰ç¹¼åˆ†è¨ˆç®—å™¨å°ˆç”¨æ¨£å¼ */
        .inheritance-calculator {
            background: #fce8e8;
            padding: 20px;
            border-radius: 10px;
        }
        .inheritance-calculator h1, 
        .inheritance-calculator h2, 
        .inheritance-calculator h3 {
            color: #e74c3c;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .inheritance-calculator h1 {
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }
        .inheritance-calculator .btn {
            background: #e74c3c;
        }
        .inheritance-calculator .btn:hover {
            background: #c0392b;
        }
        .inheritance-calculator th {
            background-color: #e74c3c;
        }
        .inheritance-calculator .note {
            background: #f9f9f9;
            border-left: 4px solid #e74c3c;
            padding: 10px;
            margin: 10px 0;
            color: #333;
        }
    
@media screen and (max-width: 768px) {
    body {
        padding: 10px;
    }
    .card, .step, .tabcontent, .timeline .content {
        padding: 10px;
        font-size: 14px;
    }
    .step-icon {
        font-size: 18px;
        margin-right: 10px;
    }
    .timeline {
        padding-left: 0;
        padding-right: 0;
    }
    svg#interactive-flowchart {
        width: 100%;
        height: auto;
    }
    .tab button {
        font-size: 12px;
        padding: 10px;
    }
    table, th, td {
        font-size: 12px;
        padding: 8px;
    }
    .risk-labels {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }
    /* æ‡‰ç¹¼åˆ†è¨ˆç®—å™¨éŸ¿æ‡‰å¼ */
    .inheritance-calculator h1 {
        font-size: 1.5em;
    }
    .inheritance-calculator h2 {
        font-size: 1.2em;
    }
    .inheritance-calculator table {
        display: block;
        width: 100%;
        overflow-x: auto;
    }
    .inheritance-calculator th, 
    .inheritance-calculator td {
        padding: 8px;
        font-size: 0.9em;
    }
    .inheritance-calculator input, 
    .inheritance-calculator select {
        padding: 8px;
        font-size: 1em;
    }
    .inheritance-calculator .btn {
        width: 100%;
        padding: 12px 0;
        margin: 10px 0;
        font-size: 1em;
    }
    .inheritance-calculator .note {
        font-size: 0.9em;
        padding: 8px;
    }
}
</style>
</head>
<body>
<h1>éºç”¢åˆ†å‰²è£åˆ¤æ³•å¾‹äº’å‹•åœ–è§£</h1>
<div class="tab">
<button class="tablinks active" onclick="openTab(event, 'overview')" style="font-size: 110% !important;">æ¡ˆä»¶ç¸½è¦½</button>
<button class="tablinks" onclick="openTab(event, 'process')" style="font-size: 110% !important;">è™•ç†æµç¨‹</button>
<button class="tablinks" onclick="openTab(event, 'calculator')" style="font-size: 110% !important;">é¢¨éšªè©•ä¼°</button>
<button class="tablinks" onclick="openTab(event, 'checklist')" style="font-size: 110% !important;">æº–å‚™æ¸…å–®</button>
<button class="tablinks" onclick="openTab(event, 'inheritance')" style="font-size: 110% !important;">æ‡‰ç¹¼åˆ†è¨ˆç®—</button>
</div>
<div class="tabcontent" id="overview" style="display: block;">
<div class="card">
<h2>éºç”¢åˆ†å‰²åŸºæœ¬è³‡è¨Š</h2>
<div class="step">
<div class="step-icon">âš–ï¸</div>
<div>
<h3>ä»€éº¼æ˜¯éºç”¢åˆ†å‰²è£åˆ¤ï¼Ÿ</h3>
<p>ç•¶ç¹¼æ‰¿äººç„¡æ³•å°±éºç”¢åˆ†å‰²é”æˆå”è­°æ™‚ï¼Œå¯å‘æ³•é™¢è²è«‹è£åˆ¤åˆ†å‰²ï¼Œç”±æ³•é™¢ä¾æ³•æ±ºå®šéºç”¢åˆ†é…æ–¹å¼ã€‚æ³•é™¢å¯è£å®šåŸç‰©åˆ†é…ã€è®Šåƒ¹åˆ†é…æˆ–æ··åˆæ–¹å¼è™•ç†ã€‚</p>
</div>
</div>
<div class="step">
<div class="step-icon">ğŸ›¡ï¸</div>
<div>
<h3>æ‚¨å¯ä»¥ç²å¾—çš„ä¿éšœ</h3>
<ul>
<li>çµ‚æ­¢éºç”¢å…¬åŒå…±æœ‰ç‹€æ…‹</li>
<li>ä¾æ³•å–å¾—æ‡‰ç¹¼åˆ†æ¯”ä¾‹ä¹‹è²¡ç”¢</li>
<li>æ³•é™¢å¯å‘½è®Šåƒ¹åˆ†é…ç¢ºä¿å…¬å¹³</li>
<li>å°çˆ­è­°è²¡ç”¢é€²è¡Œèª¿æŸ¥èˆ‡é‘‘å®š</li>
<li>è²è«‹ä¿å…¨æªæ–½é˜²æ­¢è²¡ç”¢é­è™•åˆ†</li>
</ul>
</div>
</div>
</div>
<div class="card">
<h2>éºç”¢åˆ†å‰²ç”³è«‹æ™‚é–“è»¸</h2>
<div style="overflow-x: auto; -webkit-overflow-scrolling: touch;"><div class="mermaid" style="min-width: 600px; overflow: visible;">
                gantt
                    title éºç”¢åˆ†å‰²è£åˆ¤æµç¨‹æ™‚é–“è»¸
                    dateFormat  YYYY-MM-DD
                    axisFormat  %m/%d
                    section æº–å‚™éšæ®µ
                    éºç”¢æ¸…å†Šè£½ä½œ :done, a1, 2023-01-01, 14d
                    å”è­°åˆ†å‰²å˜—è©¦ :done, a2, after a1, 30d
                    section è¨´è¨Ÿéšæ®µ
                    æå‡ºè²è«‹ :done, a3, 2023-03-01, 7d
                    æ³•é™¢å¯©ç† :active, a4, 2023-04-01, 90d
                    è£åˆ¤ç¢ºå®š : a5, after a4, 30d
                    section åŸ·è¡Œéšæ®µ
                    è²¡ç”¢åˆ†å‰²åŸ·è¡Œ : a6, after a5, 60d
            </div></div>
<p><small>â€» æ³¨æ„ï¼šå®Œæ•´æµç¨‹é€šå¸¸éœ€6-12å€‹æœˆï¼Œè¦–éºç”¢è¤‡é›œåº¦è€Œå®š</small></p>
</div>
</div>
<div class="tabcontent" id="process">
<h2>éºç”¢åˆ†å‰²ç”³è«‹æµç¨‹åœ–è§£</h2>
<div class="card">
<h3 style="color:#2E4A3F;">éºç”¢åˆ†å‰²è£åˆ¤äº’å‹•æµç¨‹åœ–</h3>
<div style="overflow-x:auto; -webkit-overflow-scrolling:touch; max-width:100%;"><div style="width:1020px;">
<svg display:block;"="" height="400" id="interactive-flowchart" min-width:1000px;="" style="background: #F9F6F1; border: 1px solid #9DB5A4; border-radius: 8px; cursor: pointer;" width="1000 style=">
<!-- ç¯€é» -->
<g class="node" data-name="ç¹¼æ‰¿é–‹å§‹">
<rect fill="#e74c3c" height="40" rx="8" width="100" x="20" y="180"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="70" y="205">ç¹¼æ‰¿é–‹å§‹</text>
</g>
<g class="node" data-name="è£½ä½œéºç”¢æ¸…å†Š">
<rect fill="#9DB5A4" height="40" rx="8" width="120" x="150" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="210" y="205">è£½ä½œéºç”¢æ¸…å†Š</text>
</g>
<g class="node" data-name="å”è­°åˆ†å‰²å˜—è©¦">
<rect fill="#E1C16E" height="40" rx="8" width="120" x="300" y="140"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="360" y="165">å”è­°åˆ†å‰²å˜—è©¦</text>
</g>
<g class="node" data-name="é”æˆå”è­°">
<rect fill="#4CAF50" height="40" rx="8" width="100" x="450" y="100"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="500" y="125">é”æˆå”è­°</text>
</g>
<g class="node" data-name="è²è«‹è£åˆ¤åˆ†å‰²">
<rect fill="#e74c3c" height="40" rx="8" width="120" x="450" y="180"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="510" y="205">è²è«‹è£åˆ¤åˆ†å‰²</text>
</g>
<g class="node" data-name="æ³•é™¢å¯©ç†">
<rect fill="#E1C16E" height="40" rx="8" width="100" x="600" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="650" y="205">æ³•é™¢å¯©ç†</text>
</g>
<g class="node" data-name="è£åˆ¤ç¢ºå®š">
<rect fill="#9DB5A4" height="40" rx="8" width="100" x="730" y="180"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="780" y="205">è£åˆ¤ç¢ºå®š</text>
</g>
<g class="node" data-name="åŸ·è¡Œåˆ†å‰²">
<rect fill="#4CAF50" height="40" rx="8" width="100" x="730" y="240"></rect>
<text fill="#fff" font-size="12" text-anchor="middle" x="780" y="265">åŸ·è¡Œåˆ†å‰²</text>
</g>
<g class="node" data-name="ç™»è¨˜æˆ–è®Šåƒ¹">
<rect fill="#E1C16E" height="40" rx="8" width="120" x="600" y="240"></rect>
<text fill="#333333" font-size="12" text-anchor="middle" x="660" y="265">ç™»è¨˜æˆ–è®Šåƒ¹</text>
</g>
<!-- é€£ç·š -->
<line stroke="#333333" stroke-width="2" x1="120" x2="150" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="270" x2="300" y1="200" y2="160"></line>
<line stroke="#333333" stroke-width="2" x1="420" x2="450" y1="160" y2="120"></line>
<line stroke="#333333" stroke-width="2" x1="420" x2="450" y1="160" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="570" x2="600" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="700" x2="730" y1="200" y2="200"></line>
<line stroke="#333333" stroke-width="2" x1="780" x2="780" y1="220" y2="240"></line>
<line stroke="#333333" stroke-width="2" x1="660" x2="730" y1="240" y2="240"></line>
<line stroke="#333333" stroke-dasharray="5,5" stroke-width="2" x1="600" x2="600" y1="220" y2="240"></line>
</svg></div></div>
</div>
<script>
        document.querySelectorAll("#interactive-flowchart .node").forEach(node => {
            node.addEventListener("mouseover", () => {
                node.querySelector("rect").setAttribute("stroke", "#E1C16E");
                node.querySelector("rect").setAttribute("stroke-width", "3");
            });
            node.addEventListener("mouseout", () => {
                node.querySelector("rect").setAttribute("stroke", "");
                node.querySelector("rect").setAttribute("stroke-width", "");
            });
            node.addEventListener("click", () => {
                const name = node.getAttribute("data-name");
                alert("æ‚¨é»æ“Šäº†ç¯€é»ï¼šã€Œ" + name + "ã€\n\n" + getNodeDescription(name));
            });
        });

        function getNodeDescription(name) {
            const descriptions = {
                "ç¹¼æ‰¿é–‹å§‹": "è¢«ç¹¼æ‰¿äººæ­»äº¡æ™‚ï¼Œéºç”¢å³ç”±å…¨é«”ç¹¼æ‰¿äººå…¬åŒå…±æœ‰ã€‚æ‡‰å„˜é€Ÿè¾¦ç†éºç”¢ç¨…ç”³å ±ä¸¦é‡æ¸…éºç”¢ç¯„åœã€‚",
                "è£½ä½œéºç”¢æ¸…å†Š": "è©³ç´°åˆ—å‡ºè¢«ç¹¼æ‰¿äººæ‰€æœ‰è²¡ç”¢ï¼ˆä¸å‹•ç”¢ã€å­˜æ¬¾ã€è‚¡ç¥¨ã€å‚µæ¬Šå‚µå‹™ç­‰ï¼‰åŠåƒ¹å€¼ï¼Œå¿…è¦æ™‚å¯å‘åœ‹ç¨…å±€ç”³è«‹è²¡ç”¢æ¸…å–®ã€‚",
                "å”è­°åˆ†å‰²å˜—è©¦": "ç¹¼æ‰¿äººé–“æ‡‰å…ˆå˜—è©¦å”è­°åˆ†å‰²ï¼Œå¯é€éå®¶åº­æœƒè­°ã€èª¿è§£ç­‰æ–¹å¼å”å•†ã€‚å”è­°å…§å®¹æ‡‰ä»¥æ›¸é¢ç‚ºä¹‹ã€‚",
                "é”æˆå”è­°": "å¦‚èƒ½é”æˆå”è­°ï¼Œæ‡‰è¨‚ç«‹éºç”¢åˆ†å‰²å”è­°æ›¸ä¸¦è¾¦ç†ç›¸é—œè²¡ç”¢ç§»è½‰ç™»è¨˜ï¼Œå®Œæˆåˆ†å‰²ç¨‹åºã€‚",
                "è²è«‹è£åˆ¤åˆ†å‰²": "å‘è¢«ç¹¼æ‰¿äººä½æ‰€åœ°ä¹‹ç®¡è½„æ³•é™¢æå‡ºè²è«‹ï¼Œéœ€é™„éºç”¢æ¸…å†Šã€å”è­°å¤±æ•—è­‰æ˜åŠåˆ†å‰²æ–¹æ¡ˆå»ºè­°ã€‚",
                "æ³•é™¢å¯©ç†": "æ³•é™¢å°‡èª¿æŸ¥éºç”¢ç‹€æ³ï¼Œå¿…è¦æ™‚å‘½é‘‘åƒ¹æˆ–èª¿æŸ¥ï¼Œä¸¦è½å–å„æ–¹æ„è¦‹å¾Œè£å®šåˆ†å‰²æ–¹æ³•ã€‚",
                "è£åˆ¤ç¢ºå®š": "æ³•é™¢è£å®šå¾Œï¼Œå¦‚ç„¡äººæŠ—å‘Šå³ç¢ºå®šï¼Œå¯æŒè£å®šæ›¸è¾¦ç†è²¡ç”¢ç§»è½‰æˆ–è®Šåƒ¹ç¨‹åºã€‚",
                "åŸ·è¡Œåˆ†å‰²": "ä¾è£å®šå…§å®¹è¾¦ç†ä¸å‹•ç”¢ç™»è¨˜ã€å­˜æ¬¾åˆ†é…ã€è‚¡ç¥¨éæˆ¶ç­‰å¯¦éš›åˆ†å‰²ç¨‹åºã€‚",
                "ç™»è¨˜æˆ–è®Šåƒ¹": "å¦‚è£å®šè®Šåƒ¹åˆ†å‰²ï¼Œæ‡‰é€²è¡Œæ‹è³£æˆ–å‡ºå”®ç¨‹åºå¾Œåˆ†é…åƒ¹é‡‘ï¼›å¦‚åŸç‰©åˆ†é…å‰‡è¾¦ç†ç™»è¨˜ã€‚"
            };
            return descriptions[name] || "ç„¡ç›¸é—œèªªæ˜";
        }
        </script>
<div class="card">
<h3>å„éšæ®µèªªæ˜</h3>
<table>
<tr>
<th>éšæ®µ</th>
<th>è¡Œå‹•å»ºè­°</th>
<th>æ‰€éœ€æ™‚é–“</th>
<th>æ³¨æ„äº‹é …</th>
</tr>
<tr>
<td>éºç”¢æ¸…å†Šè£½ä½œ</td>
<td>æ¸…æŸ¥æ‰€æœ‰éºç”¢èˆ‡è² å‚µ</td>
<td>1-2å€‹æœˆ</td>
<td>å¯å‘é‡‘èæ©Ÿæ§‹ã€åœ°æ”¿æ©Ÿé—œæŸ¥è©¢</td>
</tr>
<tr>
<td>å”è­°åˆ†å‰²</td>
<td>å¬é–‹ç¹¼æ‰¿äººæœƒè­°å”å•†</td>
<td>1-3å€‹æœˆ</td>
<td>å»ºè­°ä½œæˆæ›¸é¢ç´€éŒ„</td>
</tr>
<tr>
<td>è²è«‹è£åˆ¤åˆ†å‰²</td>
<td>æº–å‚™è²è«‹ç‹€åŠè­‰æ“š</td>
<td>1-2é€±</td>
<td>å¯å§”ä»»å¾‹å¸«è¾¦ç†</td>
</tr>
<tr>
<td>æ³•é™¢å¯©ç†</td>
<td>é…åˆæ³•é™¢èª¿æŸ¥</td>
<td>3-6å€‹æœˆ</td>
<td>å¿…è¦æ™‚æå‡ºåˆ†å‰²æ–¹æ¡ˆ</td>
</tr>
<tr>
<td>åŸ·è¡Œåˆ†å‰²</td>
<td>ä¾è£å®šè¾¦ç†ç™»è¨˜</td>
<td>1-3å€‹æœˆ</td>
<td>éœ€å®Œæˆç¨…å‹™ç¨‹åº</td>
</tr>
</table>
</div>
<div class="card">
<h3>æ³•é™¢è£åˆ¤åˆ†å‰²æ¯”ä¾‹</h3>
<div class="mermaid">
                pie
                    title è£åˆ¤åˆ†å‰²æ–¹å¼æ¯”ä¾‹
                    "åŸç‰©åˆ†é…" : 45
                    "è®Šåƒ¹åˆ†é…" : 30
                    "æ··åˆåˆ†é…" : 25
            </div>
<p><small>â€» æ ¹æ“šè¿‘å¹´æ³•é™¢çµ±è¨ˆï¼Œä¸å‹•ç”¢å¤šæ¡åŸç‰©åˆ†é…ï¼Œå‹•ç”¢å¤šæ¡è®Šåƒ¹åˆ†é…</small></p>
</div>
</div>
<div class="tabcontent" id="calculator">
<h2>æ¡ˆä»¶é¢¨éšªè©•ä¼°</h2>
<div class="card">
<h3>æ‚¨çš„è£åˆ¤åˆ†å‰²æˆåŠŸå¯èƒ½æ€§è©•ä¼°</h3>
<p>è«‹å›ç­”ä»¥ä¸‹å•é¡Œï¼Œè©•ä¼°æ‚¨çš„è£åˆ¤åˆ†å‰²æˆåŠŸå¯èƒ½æ€§èˆ‡é¢¨éšªï¼š</p>
<form id="riskAssessment">
<div class="step">
<label for="q1">1. éºç”¢ç¯„åœæ˜¯å¦æ˜ç¢ºï¼Ÿ</label>
<select id="q1">
<option value="3">æœ‰å®Œæ•´è²¡ç”¢æ¸…å†ŠåŠè­‰æ˜æ–‡ä»¶</option>
<option value="2">ä¸»è¦è²¡ç”¢æ˜ç¢ºï¼Œéƒ¨åˆ†å°é¡è²¡ç”¢ä¸æ˜</option>
<option value="1">éƒ¨åˆ†é‡è¦è²¡ç”¢æ­¸å±¬æœ‰çˆ­è­°</option>
<option value="0">å¤šæ•¸è²¡ç”¢ç¯„åœä¸æ˜æˆ–æœ‰éš±åŒ¿</option>
</select>
</div>
<div class="step">
<label for="q2">2. ç¹¼æ‰¿äººé–“å”è­°å˜—è©¦æ˜¯å¦å……åˆ†ï¼Ÿ</label>
<select id="q2">
<option value="3">å·²å¬é–‹å¤šæ¬¡æœƒè­°ä¸”æœ‰æ›¸é¢ç´€éŒ„</option>
<option value="2">æ›¾æœ‰å”å•†ä½†ç„¡æ›¸é¢ç´€éŒ„</option>
<option value="1">åƒ…å£é ­å”å•†ç„¡å…±è­˜</option>
<option value="0">å®Œå…¨ç„¡æ³•å”å•†</option>
</select>
</div>
<div class="step">
<label for="q3">3. æ˜¯å¦æœ‰çˆ­è­°è²¡ç”¢ï¼ˆå¦‚å¤è‘£ã€å‚µæ¬Šç­‰ï¼‰ï¼Ÿ</label>
<select id="q3">
<option value="3">ç„¡çˆ­è­°è²¡ç”¢ï¼Œå‡ç‚ºç™»è¨˜åˆ¶è²¡ç”¢</option>
<option value="2">æœ‰1-2é …éç™»è¨˜åˆ¶è²¡ç”¢</option>
<option value="1">æœ‰å¤šé …éç™»è¨˜åˆ¶è²¡ç”¢</option>
<option value="0">ä¸»è¦è²¡ç”¢å‡ç‚ºéç™»è¨˜åˆ¶ä¸”æœ‰çˆ­è­°</option>
</select>
</div>
<div class="step">
<label for="q4">4. æ‚¨æå‡ºçš„åˆ†å‰²æ–¹æ¡ˆåˆç†æ€§ï¼Ÿ</label>
<select id="q4">
<option value="3">ä¾å¸‚åƒ¹è©•ä¼°ä¸”ç¬¦åˆæ‡‰ç¹¼åˆ†æ¯”ä¾‹</option>
<option value="2">å¤§è‡´ç¬¦åˆæ‡‰ç¹¼åˆ†æ¯”ä¾‹</option>
<option value="1">éƒ¨åˆ†åé›¢æ‡‰ç¹¼åˆ†æ¯”ä¾‹</option>
<option value="0">å®Œå…¨æœªè€ƒæ…®æ‡‰ç¹¼åˆ†æ¯”ä¾‹</option>
</select>
</div>
<div class="step" style="">
<label for="q5">5. æ˜¯å¦å·²æ¡å–è­‰æ“šä¿å…¨æªæ–½ï¼Ÿ</label>
<select id="q5">
<option value="3">å·²å®Œæˆè²¡ç”¢ä¿å…¨åŠé‘‘åƒ¹</option>
<option value="2">å·²å®Œæˆéƒ¨åˆ†è²¡ç”¢ä¿å…¨</option>
<option value="1">åƒ…æœ‰åŸºæœ¬è­‰æ“š</option>
<option value="0">ç„¡ä»»ä½•ä¿å…¨æªæ–½</option>
</select>
</div>
</form>
<div style="background: #f9f9f9; padding: 12px 15px; margin: 25px 0; border-radius: 6px; font-size: 15px; display: flex; align-items: center;"><span style="font-size: 18px; margin-right: 10px;">â„¹ï¸</span><span>è«‹å…ˆå®Œæˆæ‰€æœ‰å•é¡Œçš„é¸æ“‡ï¼Œä¸¦é»é¸ã€Œç¢ºå®šé€²è¡Œé¢¨éšªè©•ä¼°ã€æŒ‰éˆ•å¾Œï¼Œå³å¯é¡¯ç¤ºè©•ä¼°çµæœã€‚</span></div><h4 style="margin-top: 2px; margin-bottom: 2px; line-height: 1.1;">è£åˆ¤åˆ†å‰²æˆåŠŸå¯èƒ½æ€§è©•ä¼°</h4>
<button class="btn" onclick="calculateRisk()" style="display:block; margin: 20px auto;" type="button">ç¢ºå®šé€²è¡Œé¢¨éšªè©•ä¼°</button><div class="risk-meter">
<div class="risk-pointer" id="riskPointer" style="left: 50%;"></div>
</div>
<div class="risk-labels">
<span>ä½å¯èƒ½æ€§</span>
<span>ä¸­ç­‰å¯èƒ½æ€§</span>
<span>é«˜å¯èƒ½æ€§</span>
</div>
<div id="riskResult" style="margin-top: 20px;">
<p>è«‹å›ç­”æ‰€æœ‰å•é¡Œä»¥ç²å¾—è©•ä¼°çµæœ</p>
<p style="font-size: 90%; color: #666;">æœ¬AIåˆ†æçµæœä¸å…·æ³•å¾‹æ•ˆåŠ›åƒ…ä¾›åƒè€ƒï¼Œå¦‚éœ€é€²ä¸€æ­¥å”åŠ©ï¼Œè«‹æ´½æœ¬ç«™å¾‹å¸«è«®è©¢ã€‚</p><p></p>
</div>
</div>
<div class="card">
<h3>å¯èƒ½çµæœåˆ†æ</h3>
<div class="outcome-card positive">
<h4>æœ€ä½³æƒ…æ³ï¼šæ ¸ç™¼å®Œæ•´åˆ†å‰²è£å®š</h4>
<p>å¯èƒ½æ€§ï¼š70% (éºç”¢æ˜ç¢ºã€å”è­°å……åˆ†ã€æ–¹æ¡ˆåˆç†)</p>
<p>å¯èƒ½å…§å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¸å‹•ç”¢ä¾æ‡‰ç¹¼åˆ†æ¯”ä¾‹åˆ†é…</li>
<li>å‹•ç”¢è®Šåƒ¹å¾Œåˆ†é…åƒ¹é‡‘</li>
<li>å‘½ç‰¹å®šç¹¼æ‰¿äººè£œå„Ÿå·®é¡</li>
<li>ç¢ºèªçˆ­è­°è²¡ç”¢æ­¸å±¬</li>
<li>è¨´è¨Ÿè²»ç”¨åˆ†æ“”æ¯”ä¾‹</li>
</ul>
</div>
<div class="outcome-card neutral">
<h4>ä¸­ç­‰æƒ…æ³ï¼šéƒ¨åˆ†æ¡ç´è²è«‹</h4>
<p>å¯èƒ½æ€§ï¼š20% (éƒ¨åˆ†è²¡ç”¢æœ‰çˆ­è­°æˆ–æ–¹æ¡ˆéœ€èª¿æ•´)</p>
<p>å¯èƒ½å…§å®¹ï¼š</p>
<ul>
<li>ä¸»è¦è²¡ç”¢ä¾è²è«‹åˆ†é…</li>
<li>çˆ­è­°è²¡ç”¢å¦å®šè™•ç†æ–¹å¼</li>
<li>å‘½è£œå……è­‰æ“šæˆ–é‡æ–°é‘‘åƒ¹</li>
</ul>
</div>
<div class="outcome-card negative">
<h4>æœ€å·®æƒ…æ³ï¼šé§å›æˆ–éœ€è£œæ­£</h4>
<p>å¯èƒ½æ€§ï¼š10% (è­‰æ“šä¸è¶³æˆ–ç¨‹åºç‘•ç–µ)</p>
<p>å¾ŒçºŒè¡Œå‹•å»ºè­°ï¼š</p>
<ul>
<li>è£œå¼·è­‰æ“šé‡æ–°è²è«‹</li>
<li>è²è«‹è²¡ç”¢ä¿å…¨</li>
<li>å°‹æ±‚å°ˆæ¥­é‘‘åƒ¹</li>
<li>è€ƒæ…®èª¿è§£ç¨‹åº</li>
</ul>
</div>
</div>
<div class="card">
<h3>è­‰æ“šæ•ˆåŠ›è©•ä¼°</h3>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ“„</span>
<span class="evidence-title">éºç”¢æ¸…å†Šèˆ‡ç¨…å‹™è­‰æ˜</span>
</div>
<p class="evidence-desc">æ•ˆåŠ›æœ€é«˜ï¼Œå»ºè­°å‘åœ‹ç¨…å±€ç”³è«‹è²¡ç”¢æ¸…å–®åŠå®Œç¨…è­‰æ˜ï¼Œä½œç‚ºéºç”¢ç¯„åœä¾æ“šã€‚</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ </span>
<span class="evidence-title">ä¸å‹•ç”¢ç™»è¨˜è¬„æœ¬</span>
</div>
<p class="evidence-desc">åœ°æ”¿æ©Ÿé—œæ ¸ç™¼ä¹‹ç™»è¨˜è¬„æœ¬å¯è­‰æ˜ä¸å‹•ç”¢æ­¸å±¬åŠåƒ¹å€¼ï¼Œå¿…è¦æ™‚æ‡‰é™„æœ€æ–°é‘‘åƒ¹å ±å‘Šã€‚</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ’¬</span>
<span class="evidence-title">å”è­°éç¨‹ç´€éŒ„</span>
</div>
<p class="evidence-desc">å”å•†éç¨‹çš„æœƒè­°ç´€éŒ„ã€é€šè¨Šç´€éŒ„å¯è­‰æ˜å”è­°å¤±æ•—äº‹å¯¦ï¼Œæé«˜è£åˆ¤åˆ†å‰²å¿…è¦æ€§ã€‚</p>
</div>
<div class="evidence-item">
<div style="display: flex; align-items: center;">
<span class="evidence-icon">ğŸ”</span>
<span class="evidence-title">å°ˆæ¥­é‘‘åƒ¹å ±å‘Š</span>
</div>
<p class="evidence-desc">å°æ–¼å¤è‘£ã€è—è¡“å“ç­‰ç‰¹æ®Šè²¡ç”¢ï¼Œæ³•é™¢é€šå¸¸æœƒåƒè€ƒå°ˆæ¥­é‘‘åƒ¹æ©Ÿæ§‹çš„å ±å‘Šæ±ºå®šåƒ¹å€¼ã€‚</p>
</div>
</div>
</div>
<div class="tabcontent" id="checklist"><div id="checklist-full-content">
<h2>è£åˆ¤åˆ†å‰²ç”³è«‹æº–å‚™æ¸…å–®</h2>
<div class="card">
<h3>å¿…è¦æ–‡ä»¶æª¢æŸ¥è¡¨</h3>
<div class="checklist-item">
<input id="check1" type="checkbox"/>
<label for="check1">è£åˆ¤åˆ†å‰²è²è«‹ç‹€ï¼ˆå¯å‘æ³•é™¢ç´¢å–ç¯„æœ¬ï¼‰</label>
</div>
<div class="checklist-item">
<input id="check2" type="checkbox"/>
<label for="check2">è¢«ç¹¼æ‰¿äººæ­»äº¡è­‰æ˜åŠé™¤æˆ¶è¬„æœ¬</label>
</div>
<div class="checklist-item">
<input id="check3" type="checkbox"/>
<label for="check3">å…¨é«”ç¹¼æ‰¿äººæˆ¶ç±è³‡æ–™</label>
</div>
<div class="checklist-item">
<input id="check4" type="checkbox"/>
<label for="check4">éºç”¢æ¸…å†ŠåŠè²¡ç”¢è­‰æ˜æ–‡ä»¶</label>
</div>
<div class="checklist-item">
<input id="check5" type="checkbox"/>
<label for="check5">éºç”¢ç¨…å®Œç¨…æˆ–å…ç¨…è­‰æ˜</label>
</div>
<div class="checklist-item">
<input id="check6" type="checkbox"/>
<label for="check6">å”è­°åˆ†å‰²å¤±æ•—è­‰æ˜ï¼ˆå¦‚æœƒè­°ç´€éŒ„ï¼‰</label>
</div>
<div class="checklist-item">
<input id="check7" type="checkbox"/>
<label for="check7">è²¡ç”¢é‘‘åƒ¹å ±å‘Šï¼ˆä¸å‹•ç”¢ã€ç‰¹æ®Šå‹•ç”¢ï¼‰</label>
</div>
<div class="checklist-item">
<input id="check8" type="checkbox"/>
<label for="check8">å…¶ä»–æœ‰åˆ©è­‰æ“šï¼ˆé€šè¨Šç´€éŒ„ã€è­‰äººç­‰ï¼‰</label>
</div>
<button class="btn" onclick="saveChecklist()">å„²å­˜æª¢æŸ¥è¡¨</button>
<button class="btn" onclick="printChecklist()">åˆ—å°æª¢æŸ¥è¡¨</button>
</div>
<div class="card">
<h3>è¨´è¨Ÿç­–ç•¥æª¢æŸ¥è¡¨</h3>
<div class="checklist-item">
<input id="safe1" type="checkbox"/>
<label for="safe1">ç¢ºå®šæœ€æœ‰åˆ©çš„åˆ†å‰²æ–¹æ¡ˆ</label>
</div>
<div class="checklist-item">
<input id="safe2" type="checkbox"/>
<label for="safe2">è©•ä¼°æ˜¯å¦è²è«‹è²¡ç”¢ä¿å…¨</label>
</div>
<div class="checklist-item">
<input id="safe3" type="checkbox"/>
<label for="safe3">æº–å‚™æ›¿ä»£æ–¹æ¡ˆä¾›æ³•é™¢åƒè€ƒ</label>
</div>
<div class="checklist-item">
<input id="safe4" type="checkbox"/>
<label for="safe4">ç¢ºèªå„ç¹¼æ‰¿äººè²¡ç”¢åå¥½</label>
</div>
<div class="checklist-item">
<input id="safe5" type="checkbox"/>
<label for="safe5">è©•ä¼°èª¿è§£å¯èƒ½æ€§</label>
</div>
</div>
</div>
</div>
<div class="tabcontent inheritance-calculator" id="inheritance">
<h1>æ‡‰ç¹¼åˆ†æ¯”ä¾‹è¨ˆç®—èˆ‡åˆ†é…æ¨¡æ“¬</h1>
<div class="note">
        ğŸ“˜ <strong>èªªæ˜ï¼š</strong><br/>
        æœ¬å·¥å…·ä¾æ“šæ°‘æ³•ç¬¬1138ã€1139æ¢ï¼Œå…ˆåˆ¤æ–·ç¹¼æ‰¿é †ä½ï¼Œå†ä¾æ‡‰ç¹¼åˆ†æ¯”ä¾‹è¨ˆç®—æ³•å®šåˆ†å‰²ï¼Œ
        ä¸¦æ¨¡æ“¬å¯¦éš›åˆ†é…å¾Œçš„è£œå„Ÿé‡‘é¡ã€‚è‹¥ç¹¼æ‰¿äººé–“ç„¡æ³•å”è­°åˆ†é…ï¼Œæ³•é™¢å°‡ä¾æ³•å®šæ‡‰ç¹¼åˆ†è£å®šå„è‡ªæ‡‰å¾—ä»½é¡ã€‚
        é è¨­è²¡ç”¢é …ç›®ç‚ºã€Œæˆ¿åœ°ï¼ˆæˆ¿å±‹åŠåœŸåœ°ï¼‰ã€ä»¥ç¬¦åˆå¯¦å‹™æƒ…å¢ƒã€‚
    </div>
<h2>ğŸ‘¤ ç¹¼æ‰¿äººè¨­å®š</h2>
<table id="heirTable">
<tr>
<th>ç¹¼æ‰¿äººå§“å</th>
<th>èº«ä»½</th>
<th>ç¹¼æ‰¿æ¬Šç‹€æ…‹</th>
<th>æ‡‰ç¹¼åˆ†æ¯”ä¾‹</th>
</tr>
<tr>
<td><input type="text" value="åª½åª½"/></td>
<td>
<select onchange="updateShares()" style="min-width: 80px; max-width: 120px;">
<option value="é…å¶">é…å¶</option>
<option value="å­å¥³">å­å¥³</option>
<option value="çˆ¶æ¯">çˆ¶æ¯</option>
<option value="å…„å¼Ÿå§Šå¦¹">å…„å¼Ÿå§Šå¦¹</option>
<option value="å–æ¶ˆ">å–æ¶ˆ</option>
</select>
</td>
<td class="statusCell">è¨ˆç®—ä¸­</td>
<td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
</tr>
<tr>
<td><input type="text" value="å“¥å“¥"/></td>
<td>
<select onchange="updateShares()" style="min-width: 80px; max-width: 120px;">
<option value="å­å¥³">å­å¥³</option>
<option value="é…å¶">é…å¶</option>
<option value="çˆ¶æ¯">çˆ¶æ¯</option>
<option selected="" value="å…„å¼Ÿå§Šå¦¹">å…„å¼Ÿå§Šå¦¹</option>
<option value="å–æ¶ˆ">å–æ¶ˆ</option>
</select>
</td>
<td class="statusCell">è¨ˆç®—ä¸­</td>
<td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
</tr>
<tr>
<td><input type="text" value="å¼Ÿå¼Ÿ"/></td>
<td>
<select onchange="updateShares()" style="min-width: 80px; max-width: 120px;">
<option value="å­å¥³">å­å¥³</option>
<option value="é…å¶">é…å¶</option>
<option value="çˆ¶æ¯">çˆ¶æ¯</option>
<option selected="" value="å…„å¼Ÿå§Šå¦¹">å…„å¼Ÿå§Šå¦¹</option>
<option value="å–æ¶ˆ">å–æ¶ˆ</option>
</select>
</td>
<td class="statusCell">è¨ˆç®—ä¸­</td>
<td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
</tr>
</table>
<button class="btn" onclick="addHeir()">æ–°å¢ç¹¼æ‰¿äºº</button>
<h2>ğŸ’° è²¡ç”¢åˆ†é…è¼¸å…¥ï¼ˆæ¨¡æ“¬å¯¦éš›åˆ†é…ç‹€æ³ï¼‰</h2>
<table id="estateTable">
<tr>
<th>é …ç›®åç¨±</th>
<th>åƒ¹å€¼ï¼ˆå…ƒï¼‰</th>
<th>åˆ†é…çµ¦</th>
</tr>
<tr>
<td><input type="text" value="æˆ¿åœ°ï¼ˆæˆ¿å±‹åŠåœŸåœ°ï¼‰"/></td>
<td><input type="number" value="8000000"/></td>
<td><input type="text" value="å“¥å“¥"/></td>
</tr>
<tr>
<td><input type="text" value="ç¾é‡‘"/></td>
<td><input type="number" value="2000000"/></td>
<td><input type="text" value="å¼Ÿå¼Ÿ"/></td>
</tr>
</table>
<button class="btn" onclick="addRow()">æ–°å¢è²¡ç”¢é …ç›®</button>
<button class="btn" onclick="calculateCompensation()">è¨ˆç®—åˆ†é…èˆ‡è£œå„Ÿçµæœ</button>
<h2>è¨ˆç®—çµæœ</h2>
<div id="result"></div>
</div>
<div class="card">
<h2>ç«‹å³è¡Œå‹•å»ºè­°</h2>
<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
<a class="btn" href="#">é ç´„å¾‹å¸«è«®è©¢</a>
<a class="btn" download="" href="è£åˆ¤åˆ†å‰²ç¯„æœ¬ä¸‹è¼‰.docx">ä¸‹è¼‰è²è«‹ç‹€ç¯„æœ¬</a>
</div>
</div>
<script>
        // åˆå§‹åŒ–Mermaidåœ–è¡¨
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                pie1: '#A5D6A7',
                pie2: '#FFF59D',
                pie3: '#EF9A9A'
            }
        });

        // åˆ‡æ›æ¨™ç±¤é 
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // è¨ˆç®—é¢¨éšªè©•ä¼°
        function calculateRisk() {
            const q1 = parseInt(document.getElementById('q1').value);
            const q2 = parseInt(document.getElementById('q2').value);
            const q3 = parseInt(document.getElementById('q3').value);
            const q4 = parseInt(document.getElementById('q4').value);
            const q5 = parseInt(document.getElementById('q5').value);
            
            const total = q1 + q2 + q3 + q4 + q5;
            const percentage = (total / 15) * 100;
            
            // æ›´æ–°æŒ‡é‡ä½ç½®
            document.getElementById('riskPointer').style.left = `${percentage}%`;
            
            // é¡¯ç¤ºè©•ä¼°çµæœ
            let resultText = "";
            let recommendation = "";
            
            if (percentage >= 80) {
                resultText = "<p style='color:#4CAF50;font-weight:bold;'>é«˜å¯èƒ½æ€§ï¼šæ¥µå¯èƒ½ç²æœ‰åˆ©åˆ†å‰²è£å®š</p>";
                recommendation = "å»ºè­°å®Œæ•´æå‡ºåˆ†å‰²æ–¹æ¡ˆä¸¦é™„å…·æ‰€æœ‰è­‰æ“šï¼Œæ³•é™¢å¾ˆå¯èƒ½æ¡ç´æ‚¨çš„è²è«‹å…§å®¹ã€‚";
            } else if (percentage >= 50) {
                resultText = "<p style='color:#FFC107;font-weight:bold;'>ä¸­ç­‰å¯èƒ½æ€§ï¼šå¯èƒ½ç²éƒ¨åˆ†æ¡ç´</p>";
                recommendation = "å»ºè­°åŠ å¼·çˆ­è­°è²¡ç”¢çš„è­‰æ“šåŠ›ï¼Œæå‡ºæ›´å…·å½ˆæ€§çš„åˆ†å‰²æ–¹æ¡ˆä¾›æ³•é™¢åƒè€ƒã€‚";
            } else {
                resultText = "<p style='color:#F44336;font-weight:bold;'>ä½å¯èƒ½æ€§ï¼šå¯èƒ½é¢è‡¨è²è«‹å›°é›£</p>";
                recommendation = "å»ºè­°ç«‹å³è£œå¼·è­‰æ“šï¼Œç‰¹åˆ¥æ˜¯è²¡ç”¢ç¯„åœèˆ‡åƒ¹å€¼çš„è­‰æ˜ï¼Œè€ƒæ…®è²è«‹è²¡ç”¢ä¿å…¨ã€‚";
            }
            
            document.getElementById('riskResult').innerHTML = resultText + "<p>" + recommendation + "</p>";
        }

        // å„²å­˜æª¢æŸ¥è¡¨ç‹€æ…‹
        function saveChecklist() {
            alert('æª¢æŸ¥è¡¨ç‹€æ…‹å·²å„²å­˜ï¼ˆæ­¤ç‚ºæ¼”ç¤ºåŠŸèƒ½ï¼Œå¯¦éš›éœ€æ­é…å¾Œç«¯å„²å­˜ï¼‰');
        }

        // åˆ—å°æª¢æŸ¥è¡¨
        function printChecklist() {
            window.print();
        }

        // æ‡‰ç¹¼åˆ†è¨ˆç®—å™¨åŠŸèƒ½
        function addHeir() {
            const table = document.getElementById('heirTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td><input type="text" placeholder="ç¹¼æ‰¿äººå§“å"></td>
                <td>
                    <select style="min-width: 80px; max-width: 120px;" onchange="updateShares()">
                        <option value="é…å¶">é…å¶</option>
                        <option value="å­å¥³">å­å¥³</option>
                        <option value="çˆ¶æ¯">çˆ¶æ¯</option>
                        <option value="å…„å¼Ÿå§Šå¦¹">å…„å¼Ÿå§Šå¦¹</option>
        <option value="å–æ¶ˆ">å–æ¶ˆ</option>
                    </select>
                </td>
                <td class="statusCell">è¨ˆç®—ä¸­</td>
                <td class="shareCell">è‡ªå‹•è¨ˆç®—</td>
            `;
        }

        function addRow() {
            const table = document.getElementById('estateTable');
            const row = table.insertRow();
            row.innerHTML = `
                <td><input type="text" placeholder="ä¾‹å¦‚ï¼šè‚¡ç¥¨ã€ä¿éšªé‡‘"></td>
                <td><input type="number" placeholder="åƒ¹å€¼"></td>
                <td><input type="text" placeholder="åˆ†é…çµ¦èª°"></td>
            `;
        }

        function updateSpouseOptions() {
            const selects = document.querySelectorAll('#heirTable select');
            let spouseSelected = false;
            selects.forEach(sel => {
                if (sel.value === 'é…å¶') spouseSelected = true;
            });
            selects.forEach(sel => {
                const options = sel.querySelectorAll('option');
                options.forEach(opt => {
                    if (opt.value === 'é…å¶') {
                        opt.disabled = spouseSelected && sel.value !== 'é…å¶';
                    }
                });
            });
        }

        function updateShares() {
            const rows = document.querySelectorAll('#heirTable tr');
            let hasChild = false, hasParent = false, hasSibling = false, hasSpouse = false;
            let childCount = 0, parentCount = 0, siblingCount = 0;
            rows.forEach((row, idx) => {
                if (idx === 0) return;
                const role = row.cells[1].querySelector('select').value;
                if (role === 'å­å¥³') { hasChild = true; childCount++; }
                if (role === 'çˆ¶æ¯') { hasParent = true; parentCount++; }
                if (role === 'å…„å¼Ÿå§Šå¦¹') { hasSibling = true; siblingCount++; }
                if (role === 'é…å¶') hasSpouse = true;
            });

            rows.forEach((row, idx) => {
                if (idx === 0) return;
                const role = row.cells[1].querySelector('select').value;
                let share = 0;
                let status = "æœ‰ç¹¼æ‰¿æ¬Š";

                if (hasChild) {
                    if (role === 'å­å¥³') share = hasSpouse ? (1 / 2) / childCount : 1 / childCount;
                    else if (role === 'é…å¶') share = 1 / 2;
                    else { status = "æ’é™¤æ–¼ç¹¼æ‰¿å¤–"; share = 0; }
                } else if (hasParent) {
                    if (role === 'çˆ¶æ¯') share = hasSpouse ? (1 / 2) / parentCount : 1 / parentCount;
                    else if (role === 'é…å¶') share = 1 / 2;
                    else { status = "æ’é™¤æ–¼ç¹¼æ‰¿å¤–"; share = 0; }
                } else if (hasSibling) {
                    if (role === 'å…„å¼Ÿå§Šå¦¹') share = hasSpouse ? (1 / 2) / siblingCount : 1 / siblingCount;
                    else if (role === 'é…å¶') share = 1 / 2;
                    else { status = "æ’é™¤æ–¼ç¹¼æ‰¿å¤–"; share = 0; }
                } else {
                    if (role === 'é…å¶') share = 1;
                    else { status = "æ’é™¤æ–¼ç¹¼æ‰¿å¤–"; share = 0; }
                }
                row.cells[2].textContent = status;
                updateSpouseOptions();
                row.cells[3].textContent = status === "æ’é™¤æ–¼ç¹¼æ‰¿å¤–" ? '0%' : (share * 100).toFixed(2) + '%';
            });
        }

        function calculateCompensation() {
            const heirRows = document.querySelectorAll('#heirTable tr');
            let heirs = [];
            let shares = [];
            heirRows.forEach((row, idx) => {
                if (idx === 0) return;
                const name = row.cells[0].querySelector('input').value.trim();
                const shareText = row.cells[3].textContent;
                const share = shareText.includes('%') ? parseFloat(shareText) / 100 : 0;
                heirs.push(name);
                shares.push(share);
            });

            const estateRows = document.querySelectorAll('#estateTable tr');
            let totalValue = 0;
            let heirActual = {};
            heirs.forEach(h => heirActual[h] = 0);

            estateRows.forEach((row, idx) => {
                if (idx === 0) return;
                const value = Number(row.cells[1].querySelector('input').value);
                const owner = row.cells[2].querySelector('input').value.trim();
                totalValue += value;
                if (heirActual[owner] !== undefined) {
                    heirActual[owner] += value;
                }
            });

            let resultHtml = `<table><tr><th>ç¹¼æ‰¿äºº</th><th>æ‡‰å¾—é‡‘é¡</th><th>å¯¦éš›åˆ†é…é‡‘é¡</th><th>å·®é¡</th><th>æ³•å¾‹èªªæ˜</th></tr>`;
            let summary = [];

            heirs.forEach((h, idx) => {
                const shouldGet = totalValue * shares[idx];
                const actualGet = heirActual[h] || 0;
                const diff = actualGet - shouldGet;
                summary.push({ name: h, diff: diff });
                let legalNote = diff > 0 ?
                    "å–å¾—è¶…é¡éƒ¨åˆ†ï¼Œæ‡‰è£œå„Ÿä»–äººã€‚" :
                    diff < 0 ? "æœ‰æ¬Šè«‹æ±‚è£œå„Ÿã€‚" :
                    "å·²å…¬å¹³åˆ†å‰²ï¼Œç„¡éœ€è£œå„Ÿã€‚";
                resultHtml += `<tr>
                    <td>${h}</td>
                    <td>${Math.round(shouldGet).toLocaleString()} å…ƒ</td>
                    <td>${Math.round(actualGet).toLocaleString()} å…ƒ</td>
                    <td>${Math.round(diff).toLocaleString()} å…ƒ</td>
                    <td>${legalNote}</td>
                </tr>`;
            });
            resultHtml += `</table>`;

            let totalSummary = "";
            summary.forEach(s => {
                const name = s.name;
                const actual = Math.round(heirActual[name]);
                const should = Math.round(totalValue * shares[heirs.indexOf(name)]);
                const overage = Math.round(s.diff);
                if (s.diff > 0) {
                    totalSummary += `å›  ${name} å¯¦éš›æŒæœ‰ ${actual.toLocaleString()} å…ƒï¼Œé«˜æ–¼æ‡‰ç¹¼åˆ† ${should.toLocaleString()} å…ƒï¼Œéœ€è£œå„Ÿè¶…é¡éƒ¨åˆ† ${overage.toLocaleString()} å…ƒã€‚<br>`;
                }
            });
            if (totalSummary !== "") {
                resultHtml += `<div style="margin:10px 0; padding:10px; background:#f0f8ff; border-left:4px solid #3498db;"><strong>ç¸½çµï¼š</strong><br>${totalSummary}</div>`;
            }

            resultHtml += `<h3>è£œå„Ÿå»ºè­°</h3><ul>`;
            const payers = summary.filter(s => s.diff > 0).sort((a, b) => b.diff - a.diff);
            const receivers = summary.filter(s => s.diff < 0).sort((a, b) => a.diff - b.diff);

            payers.forEach(p => {
                let payAmount = p.diff;
                receivers.forEach(r => {
                    if (payAmount > 0 && r.diff < 0) {
                        const receiveAmount = Math.min(payAmount, -r.diff);
                        resultHtml += `<li>${p.name} è£œå„Ÿ ${r.name}ï¼š${Math.round(receiveAmount).toLocaleString()} å…ƒ</li>`;
                        payAmount -= receiveAmount;
                        r.diff += receiveAmount;
                    }
                });
            });
            resultHtml += `</ul>`;

            document.getElementById('result').innerHTML = resultHtml;
        }

        window.onload = function() {
            updateShares();
            // åˆå§‹åŒ–æ¨™ç±¤é 
            document.getElementById('overview').style.display = 'block';
        };

        document.querySelectorAll('#heirTable').forEach(table => {
            table.addEventListener('change', function(e) {
                if (e.target && e.target.tagName === 'SELECT') {
                    if (e.target.value === 'å–æ¶ˆ') {
                        const row = e.target.closest('tr');
                        row.parentNode.removeChild(row);
                        updateShares(); // Recalculate shares after removal
                    }
                }
            });
        });
    </script>
<!-- å¼•å…¥ html2pdf.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function saveChecklist() {
    const element = document.getElementById('checklist-full-content');
    const opt = {
        margin:       [0.2, 0.2, 0.2, 0.2],
        filename:     'éºç”¢åˆ†å‰²æº–å‚™æ¸…å–®.pdf',
        image:        { type: 'jpeg', quality: 1 },
        html2canvas:  { scale: 2, useCORS: true, scrollY: 0 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' },
        pagebreak:    { mode: ['avoid-all'] }
    };
    html2pdf().set(opt).from(element).save();
}
</script>
</body>
</html>